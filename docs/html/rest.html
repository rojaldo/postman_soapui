<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<title>Guía Completa de Arquitectura REST</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Guía Completa de Arquitectura REST</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_1_introducción_a_rest">1. Introducción a REST</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_1_qué_es_rest">1.1 ¿Qué es REST?</h3>
<div class="paragraph">
<p>REST (Representational State Transfer) es un estilo arquitectónico para diseñar sistemas distribuidos basados en web.</p>
</div>
<div class="sect3">
<h4 id="_definición_de_componentes">Definición de Componentes</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Representational</strong>: Los recursos se representan en diferentes formatos (JSON, XML, HTML)</p>
</li>
<li>
<p><strong>State</strong>: El estado actual del recurso</p>
</li>
<li>
<p><strong>Transfer</strong>: Se transfiere entre cliente y servidor mediante HTTP</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_características_fundamentales">Características Fundamentales</h4>
<div class="ulist">
<ul>
<li>
<p>Estilo arquitectónico basado en web (aprovecha protocolo HTTP)</p>
</li>
<li>
<p>Utiliza recursos identificables mediante URIs/URLs</p>
</li>
<li>
<p>Operaciones estándar mediante métodos HTTP (GET, POST, PUT, DELETE)</p>
</li>
<li>
<p>Comunicación stateless (sin estado en servidor)</p>
</li>
<li>
<p>Respuestas con códigos de estado HTTP explícitos</p>
</li>
<li>
<p>Formato de datos agnóstico del protocolo</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comparativa_rest_vs_soap_vs_rpc">Comparativa: REST vs SOAP vs RPC</h4>
<div class="sect4">
<h5 id="_soap_simple_object_access_protocol">SOAP (Simple Object Access Protocol)</h5>
<div class="ulist">
<ul>
<li>
<p>Protocolo pesado basado en XML</p>
</li>
<li>
<p>Mayor complejidad y overhead</p>
</li>
<li>
<p>Requiere especificaciones WSDL</p>
</li>
<li>
<p>Mejor para sistemas empresariales complejos</p>
</li>
<li>
<p>Difícil de debuggear</p>
</li>
<li>
<p>Requiere librerías específicas</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_rpc_remote_procedure_call">RPC (Remote Procedure Call)</h5>
<div class="ulist">
<ul>
<li>
<p>Enfoque: "Llamar una función remota"</p>
</li>
<li>
<p>Centrado en acciones (verbos)</p>
</li>
<li>
<p>Difícil de cachear</p>
</li>
<li>
<p>Baja escalabilidad</p>
</li>
<li>
<p>Ejemplo: XML-RPC, JSON-RPC</p>
</li>
<li>
<p>Acoplamiento cliente-servidor</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_rest_recomendado_para_web_moderna">REST (Recomendado para web moderna)</h5>
<div class="ulist">
<ul>
<li>
<p>Arquitectura ligera y flexible</p>
</li>
<li>
<p>Centrada en recursos (sustantivos)</p>
</li>
<li>
<p>Aprovecha HTTP nativamente</p>
</li>
<li>
<p>Fácil de cachear y escalar</p>
</li>
<li>
<p>Debuggable con navegador o curl</p>
</li>
<li>
<p>Mayor flexibilidad</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ventajas_principales_de_rest">Ventajas Principales de REST</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Simplicidad</strong>: Fácil de entender e implementar</p>
</li>
<li>
<p><strong>Escalabilidad</strong>: Diseñado para escalar horizontalmente</p>
</li>
<li>
<p><strong>Cacheable</strong>: Aprovecha los mecanismos de caché HTTP</p>
</li>
<li>
<p><strong>Independencia</strong>: No depende de lenguaje o plataforma</p>
</li>
<li>
<p><strong>Amplio soporte</strong>: Soportado en navegadores, herramientas y frameworks</p>
</li>
<li>
<p><strong>Alineación web</strong>: Sigue estándares HTTP existentes</p>
</li>
<li>
<p><strong>Menor ancho de banda</strong>: Respuestas más compactas</p>
</li>
<li>
<p><strong>Stateless</strong>: Facilita la distribución de carga</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_desventajas_y_limitaciones_de_rest">Desventajas y Limitaciones de REST</h4>
<div class="ulist">
<ul>
<li>
<p>Puede requerir múltiples requests para datos complejos</p>
</li>
<li>
<p>Menos eficiente que RPC en algunos casos</p>
</li>
<li>
<p>Requiere disciplina en el diseño</p>
</li>
<li>
<p>Puede resultar en "over-fetching" o "under-fetching"</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_casos_de_uso_ideales">Casos de Uso Ideales</h4>
<div class="ulist">
<ul>
<li>
<p>APIs web públicas y privadas</p>
</li>
<li>
<p>Aplicaciones mobile (iOS, Android)</p>
</li>
<li>
<p>Integraciones entre sistemas</p>
</li>
<li>
<p>Arquitecturas de microservicios</p>
</li>
<li>
<p>Single Page Applications (SPA)</p>
</li>
<li>
<p>IoT y sistemas distribuidos</p>
</li>
<li>
<p>Aplicaciones en tiempo real</p>
</li>
<li>
<p>Backend para múltiples clientes</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cuándo_no_usar_rest">Cuándo NO usar REST</h4>
<div class="ulist">
<ul>
<li>
<p>Sistemas que requieren comunicación en tiempo real compleja (preferir WebSockets)</p>
</li>
<li>
<p>Aplicaciones con esquemas muy complejos y cambiantes (considerar GraphQL)</p>
</li>
<li>
<p>Sistemas de comunicación de baja latencia crítica</p>
</li>
<li>
<p>Cuando se necesita control fino sobre el protocolo de transporte</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_1_2_historia_y_evolución">1.2 Historia y Evolución</h3>
<div class="sect3">
<h4 id="_orígenes_la_tesis_de_roy_fielding_2000">Orígenes: La Tesis de Roy Fielding (2000)</h4>
<div class="ulist">
<ul>
<li>
<p>Roy Fielding, investigador del W3C y Apache Software Foundation</p>
</li>
<li>
<p>Publicó su tesis doctoral "Architectural Styles and the Design of Network-based Software Architectures"</p>
</li>
<li>
<p>Definió formalmente los principios de REST basándose en la arquitectura web existente</p>
</li>
<li>
<p>Objetivo: Crear un modelo que explicara por qué HTTP funcionaba tan bien</p>
</li>
<li>
<p>Influencia de trabajos previos sobre estilos arquitectónicos</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_evolución_del_protocolo_http">Evolución del Protocolo HTTP</h4>
<div class="sect4">
<h5 id="_http0_9_1991">HTTP/0.9 (1991)</h5>
<div class="ulist">
<ul>
<li>
<p>Versión original muy simple</p>
</li>
<li>
<p>Solo soportaba GET</p>
</li>
<li>
<p>Sin headers</p>
</li>
<li>
<p>Conexión de corta duración</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_http1_0_1996">HTTP/1.0 (1996)</h5>
<div class="ulist">
<ul>
<li>
<p>Introdujo POST y HEAD</p>
</li>
<li>
<p>Headers de solicitud y respuesta</p>
</li>
<li>
<p>Códigos de estado HTTP (2xx, 3xx, 4xx, 5xx)</p>
</li>
<li>
<p>Tipos de contenido (Content-Type)</p>
</li>
<li>
<p>Primera versión con características REST-friendly</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_http1_1_1997">HTTP/1.1 (1997)</h5>
<div class="ulist">
<ul>
<li>
<p>Mejoras significativas de performance</p>
</li>
<li>
<p>PUT y DELETE (pilares de REST)</p>
</li>
<li>
<p>Keep-Alive (conexiones persistentes)</p>
</li>
<li>
<p>Caching mejorado (ETag, Last-Modified)</p>
</li>
<li>
<p>Compresión (Content-Encoding)</p>
</li>
<li>
<p>Host virtual support</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_http2_2015">HTTP/2 (2015)</h5>
<div class="ulist">
<ul>
<li>
<p>Multiplexing de streams</p>
</li>
<li>
<p>Compresión de headers</p>
</li>
<li>
<p>Push de recursos</p>
</li>
<li>
<p>Mejor performance en conexiones lentas</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_http3_2022">HTTP/3 (2022)</h5>
<div class="ulist">
<ul>
<li>
<p>Basado en QUIC</p>
</li>
<li>
<p>Reducción de latencia</p>
</li>
<li>
<p>Mejor manejo de pérdida de paquetes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adopción_en_la_industria">Adopción en la Industria</h4>
<div class="sect4">
<h5 id="_primeros_adoptantes_2000_2005">Primeros Adoptantes (2000-2005)</h5>
<div class="ulist">
<ul>
<li>
<p>Amazon: Lanzó Amazon Web Services (AWS) con API REST en 2002</p>
</li>
<li>
<p>Flickr: API REST para compartir fotos</p>
</li>
<li>
<p>Del.icio.us: Servicio de marcadores con REST</p>
</li>
<li>
<p>Inicio de la "Web 2.0"</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_consolidación_2005_2010">Consolidación (2005-2010)</h5>
<div class="ulist">
<ul>
<li>
<p>Twitter: API REST pública en 2006</p>
</li>
<li>
<p>Facebook: Graph API basada en REST</p>
</li>
<li>
<p>Google: APIs REST para múltiples servicios</p>
</li>
<li>
<p>Adopción masiva en aplicaciones web</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_madurez_2010_2015">Madurez (2010-2015)</h5>
<div class="ulist">
<ul>
<li>
<p>REST se convierte en estándar de facto</p>
</li>
<li>
<p>Aparece OpenAPI/Swagger para documentación</p>
</li>
<li>
<p>Microservicios basados en REST</p>
</li>
<li>
<p>Mobile APIs (iOS y Android)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_era_moderna_2015_presente">Era Moderna (2015-Presente)</h5>
<div class="ulist">
<ul>
<li>
<p>REST consolidado como arquitectura principal</p>
</li>
<li>
<p>Competencia con GraphQL</p>
</li>
<li>
<p>APIs REST en IoT y Edge Computing</p>
</li>
<li>
<p>Evolución hacia APIs más complejas</p>
</li>
<li>
<p>Hipermedia y HATEOAS ganan relevancia</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hitos_importantes">Hitos Importantes</h4>
<div class="ulist">
<ul>
<li>
<p>2000: Roy Fielding define REST formalmente</p>
</li>
<li>
<p>2002: AWS lanza su API REST revolucionaria</p>
</li>
<li>
<p>2006: Twitter API REST pública</p>
</li>
<li>
<p>2010: Adopción masiva en empresas tecnológicas</p>
</li>
<li>
<p>2014: Surge GraphQL como alternativa</p>
</li>
<li>
<p>2020: REST sigue siendo el estándar dominante</p>
</li>
<li>
<p>2023-2024: Evolución hacia APIs más especializadas</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_impacto_en_la_industria">Impacto en la Industria</h4>
<div class="ulist">
<ul>
<li>
<p>Transformó la forma de diseñar aplicaciones web</p>
</li>
<li>
<p>Facilitó la integración entre sistemas</p>
</li>
<li>
<p>Posibilitó el desarrollo de microservicios</p>
</li>
<li>
<p>Permitió la explosión de las aplicaciones mobile</p>
</li>
<li>
<p>Basamento de la arquitectura cloud moderna</p>
</li>
<li>
<p>Estándar en IoT y sistemas distribuidos</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_competidores_y_alternativas">Competidores y Alternativas</h4>
<div class="ulist">
<ul>
<li>
<p><strong>SOAP</strong> (anterior a REST, aún en uso empresarial)</p>
</li>
<li>
<p><strong>GraphQL</strong> (desde 2012, complemento o alternativa)</p>
</li>
<li>
<p><strong>gRPC</strong> (Google, para sistemas de alto rendimiento)</p>
</li>
<li>
<p><strong>WebSockets</strong> (para comunicación en tiempo real)</p>
</li>
<li>
<p><strong>Apache Thrift</strong> (RPC alternativo)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_principios_fundamentales_de_rest">2. Principios Fundamentales de REST</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_1_restricciones_arquitectónicas">2.1 Restricciones Arquitectónicas</h3>
<div class="paragraph">
<p>Las restricciones arquitectónicas son los principios fundamentales que definen a REST. Estas fueron formalmente definidas por Roy Fielding en su tesis doctoral.</p>
</div>
<div class="sect3">
<h4 id="_1_arquitectura_cliente_servidor">1. Arquitectura Cliente-Servidor</h4>
<div class="sect4">
<h5 id="_descripción">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>Separación clara de responsabilidades entre cliente y servidor</p>
</li>
<li>
<p>El cliente inicia las solicitudes</p>
</li>
<li>
<p>El servidor responde a las solicitudes</p>
</li>
<li>
<p>Independencia en la evolución de ambos componentes</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_beneficios">Beneficios</h5>
<div class="ulist">
<ul>
<li>
<p>Portabilidad del cliente (web, mobile, desktop)</p>
</li>
<li>
<p>Escalabilidad del servidor</p>
</li>
<li>
<p>Simplificación de arquitectura</p>
</li>
<li>
<p>Permite desarrollo independiente</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo">Ejemplo</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cliente                          Servidor
  |                                |
  |---- GET /api/usuarios -----&gt;   |
  |                                |
  |  &lt;---- [JSON usuarios] -----   |
  |                                |</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_stateless_sin_estado">2. Stateless (Sin Estado)</h4>
<div class="sect4">
<h5 id="_descripción_2">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>El servidor NO almacena contexto de cliente</p>
</li>
<li>
<p>Cada solicitud contiene toda la información necesaria</p>
</li>
<li>
<p>No hay sesiones almacenadas en el servidor</p>
</li>
<li>
<p>Cada request es independiente</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ventajas">Ventajas</h5>
<div class="ulist">
<ul>
<li>
<p>Escalabilidad horizontal ilimitada</p>
</li>
<li>
<p>Facilita balanceo de carga</p>
</li>
<li>
<p>Simplifica recuperación ante fallos</p>
</li>
<li>
<p>Mejora el rendimiento</p>
</li>
<li>
<p>No requiere sincronización entre servidores</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_desventajas">Desventajas</h5>
<div class="ulist">
<ul>
<li>
<p>Mayor tamaño de las solicitudes</p>
</li>
<li>
<p>Requiere más procesamiento por request</p>
</li>
<li>
<p>Necesita autenticación en cada solicitud</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_correcto_stateless">Ejemplo Correcto (Stateless)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">Request Header:
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

El servidor no almacena sesión, valida el token en cada solicitud</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_incorrecto_stateful">Ejemplo Incorrecto (Stateful)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Request 1: Login
Session guardada en servidor bajo ID: abc123

Request 2: GET /api/usuarios
El servidor busca la sesión abc123 en memoria
Esto viola el principio stateless</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_cacheable">3. Cacheable</h4>
<div class="sect4">
<h5 id="_descripción_3">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>Las respuestas deben indicar si pueden ser cacheadas</p>
</li>
<li>
<p>Aprovecha mecanismos de caché HTTP</p>
</li>
<li>
<p>Reduce tráfico de red</p>
</li>
<li>
<p>Mejora la experiencia del usuario</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_headers_de_caché_importantes">Headers de Caché Importantes</h5>
<div class="ulist">
<ul>
<li>
<p><code>Cache-Control</code>: Define política de caché</p>
</li>
<li>
<p><code>ETag</code>: Identificador de versión de recurso</p>
</li>
<li>
<p><code>Last-Modified</code>: Fecha última modificación</p>
</li>
<li>
<p><code>Expires</code>: Fecha de expiración</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_estrategias_de_caché">Estrategias de Caché</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Cache-Control: public</strong> - Cualquiera puede cachear</p>
</li>
<li>
<p><strong>Cache-Control: private</strong> - Solo el cliente cachea</p>
</li>
<li>
<p><strong>Cache-Control: max-age=3600</strong> - Válido por 1 hora</p>
</li>
<li>
<p><strong>Cache-Control: no-cache</strong> - Revalidar antes de usar</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_2">Ejemplo</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Response Headers:
Cache-Control: public, max-age=3600
ETag: "33a64df551"
Last-Modified: Wed, 21 Oct 2025 07:28:00 GMT

GET /api/usuarios
Si no ha expirado → Se sirve del caché local
Si ha expirado → Revalida con If-None-Match o If-Modified-Since</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_4_uniform_interface_interfaz_uniforme">4. Uniform Interface (Interfaz Uniforme)</h4>
<div class="sect4">
<h5 id="_descripción_4">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>Interfaz consistente entre clientes y servidor</p>
</li>
<li>
<p>Simplifica la arquitectura</p>
</li>
<li>
<p>Facilita la comprensión de la API</p>
</li>
<li>
<p>Se compone de 4 sub-restricciones</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sub_restricción_identificación_de_recursos">Sub-restricción: Identificación de Recursos</h5>
<div class="ulist">
<ul>
<li>
<p>Recursos identificables por URIs</p>
</li>
<li>
<p>Los URIs no cambian</p>
</li>
<li>
<p>Una URI representa un único recurso</p>
</li>
<li>
<p>Un recurso puede tener múltiples representaciones</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sub_restricción_manipulación_de_recursos">Sub-restricción: Manipulación de Recursos</h5>
<div class="ulist">
<ul>
<li>
<p>Se manipulan a través de representaciones</p>
</li>
<li>
<p>El cliente envía la representación del nuevo estado</p>
</li>
<li>
<p>El servidor actualiza el recurso</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sub_restricción_mensajes_auto_descriptivos">Sub-restricción: Mensajes Auto-descriptivos</h5>
<div class="ulist">
<ul>
<li>
<p>Cada mensaje contiene información de cómo procesarlo</p>
</li>
<li>
<p>Incluye Content-Type, método HTTP, etc.</p>
</li>
<li>
<p>Reduce acoplamiento cliente-servidor</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sub_restricción_hateoas_hypermedia_as_the_engine_of_application_state">Sub-restricción: HATEOAS (Hypermedia as the Engine of Application State)</h5>
<div class="ulist">
<ul>
<li>
<p>Respuestas incluyen enlaces a otros recursos relacionados</p>
</li>
<li>
<p>El cliente descubre acciones disponibles</p>
</li>
<li>
<p>Disminuye el acoplamiento</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_hateoas">Ejemplo HATEOAS</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "id": 1,
  "nombre": "Juan",
  "email": "juan@example.com",
  "_links": {
    "self": {
      "href": "/api/usuarios/1"
    },
    "todos": {
      "href": "/api/usuarios"
    },
    "actualizar": {
      "href": "/api/usuarios/1",
      "method": "PUT"
    },
    "eliminar": {
      "href": "/api/usuarios/1",
      "method": "DELETE"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_5_layered_system_sistema_en_capas">5. Layered System (Sistema en Capas)</h4>
<div class="sect4">
<h5 id="_descripción_5">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>Arquitectura en capas/niveles</p>
</li>
<li>
<p>Cada capa tiene responsabilidades específicas</p>
</li>
<li>
<p>El cliente no conoce si está conectado al servidor final</p>
</li>
<li>
<p>Intermediarios transparentes para el cliente</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_capas_típicas">Capas Típicas</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Capa de Presentación</strong>: Interfaz con el cliente</p>
</li>
<li>
<p><strong>Capa de Negocio</strong>: Lógica de aplicación</p>
</li>
<li>
<p><strong>Capa de Persistencia</strong>: Acceso a datos</p>
</li>
<li>
<p><strong>Capa de Seguridad</strong>: Autenticación y autorización</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ventajas_2">Ventajas</h5>
<div class="ulist">
<ul>
<li>
<p>Escalabilidad</p>
</li>
<li>
<p>Flexibilidad</p>
</li>
<li>
<p>Permite intermediarios (proxy, load balancer)</p>
</li>
<li>
<p>Mejora la seguridad (encriptación entre capas)</p>
</li>
<li>
<p>Facilita el testing y mantenimiento</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_arquitectura_en_capas">Ejemplo de Arquitectura en Capas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cliente
   ↓
[API Gateway]
   ↓
[Load Balancer]
   ↓
[Servidor Aplicación]
   ↓
[Caché Redis]
   ↓
[Base de Datos]

El cliente no sabe cuántas capas hay, solo se comunica con la API</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_code_on_demand_bajo_demanda_opcional">6. Code on Demand (Bajo Demanda) - OPCIONAL</h4>
<div class="sect4">
<h5 id="_descripción_6">Descripción</h5>
<div class="ulist">
<ul>
<li>
<p>El servidor puede extender funcionalidad del cliente</p>
</li>
<li>
<p>Envía código ejecutable al cliente (JavaScript, applets)</p>
</li>
<li>
<p>Es la restricción OPCIONAL de REST</p>
</li>
<li>
<p>Menos común en APIs modernas</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso">Casos de Uso</h5>
<div class="ulist">
<ul>
<li>
<p>JavaScript en aplicaciones web</p>
</li>
<li>
<p>Plugins descargables</p>
</li>
<li>
<p>Applets Java (histórico)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ventajas_3">Ventajas</h5>
<div class="ulist">
<ul>
<li>
<p>Reduce funcionalidad del cliente</p>
</li>
<li>
<p>Actualización dinámica de comportamiento</p>
</li>
<li>
<p>Flexibilidad</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_desventajas_2">Desventajas</h5>
<div class="ulist">
<ul>
<li>
<p>Reduce seguridad</p>
</li>
<li>
<p>Complejidad</p>
</li>
<li>
<p>Problemas de compatibilidad</p>
</li>
<li>
<p>Menos usado en APIs REST modernas</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_3">Ejemplo</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// El servidor envía JavaScript que el cliente ejecuta
const script = document.createElement('script');
script.src = '/api/validadores.js';
script.onload = function() {
  // Usar funciones del servidor
  validarFormulario(data);
};
document.head.appendChild(script);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_de_restricciones">Resumen de Restricciones</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Restricción</th>
<th class="tableblock halign-left valign-top">Obligatoria</th>
<th class="tableblock halign-left valign-top">Beneficio Principal</th>
<th class="tableblock halign-left valign-top">Desafío Principal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente-Servidor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separación de responsabilidades</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complejidad inicial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stateless</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escalabilidad ilimitada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requests más grandes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cacheable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mejor performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión de invalidación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uniform Interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simplicidad y consistencia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requiere disciplina</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Layered System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flexibilidad y seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latencia adicional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code on Demand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flexibilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad y complejidad</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_componentes_clave">2.2 Componentes Clave</h3>
<div class="paragraph">
<p>Los componentes clave son los elementos fundamentales que conforman una arquitectura REST. Cada uno juega un papel crítico en el diseño y funcionamiento de APIs REST.</p>
</div>
<div class="sect3">
<h4 id="_1_recursos">1. Recursos</h4>
<div class="sect4">
<h5 id="_definición">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Entidades o datos que la API expone</p>
</li>
<li>
<p>Identificables de forma única</p>
</li>
<li>
<p>Pueden ser modificados, consultados o eliminados</p>
</li>
<li>
<p>Abstracciones de información del dominio</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Sustantivos</strong>: Se modelan como nombres, no verbos</p>
</li>
<li>
<p><strong>Únicos</strong>: Cada recurso tiene una identidad propia</p>
</li>
<li>
<p><strong>Reutilizables</strong>: Pueden ser accedidos por múltiples clientes</p>
</li>
<li>
<p><strong>Independientes</strong>: No dependen de otros recursos</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_recursos">Ejemplos de Recursos</h5>
<div class="ulist">
<ul>
<li>
<p>Usuarios</p>
</li>
<li>
<p>Productos</p>
</li>
<li>
<p>Pedidos</p>
</li>
<li>
<p>Comentarios</p>
</li>
<li>
<p>Artículos</p>
</li>
<li>
<p>Categorías</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_incorrectos_verbos">Ejemplos Incorrectos (Verbos)</h5>
<div class="ulist">
<ul>
<li>
<p>getUsuarios ❌ (Incorrecto: verbo)</p>
</li>
<li>
<p>createProduct ❌ (Incorrecto: verbo)</p>
</li>
<li>
<p>deleteOrder ❌ (Incorrecto: verbo)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_recursos_correctos">Recursos Correctos</h5>
<div class="ulist">
<ul>
<li>
<p>Usuarios ✓</p>
</li>
<li>
<p>Productos ✓</p>
</li>
<li>
<p>Pedidos ✓</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_recursos_compuestos">Recursos Compuestos</h5>
<div class="ulist">
<ul>
<li>
<p>Colecciones: /usuarios (todos los usuarios)</p>
</li>
<li>
<p>Instancias: /usuarios/123 (usuario específico)</p>
</li>
<li>
<p>Sub-recursos: /usuarios/123/pedidos (pedidos del usuario 123)</p>
</li>
<li>
<p>Propiedades: /usuarios/123/nombre (propiedad específica)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_uris_identificadores_uniformes_de_recursos">2. URIs (Identificadores Uniformes de Recursos)</h4>
<div class="sect4">
<h5 id="_definición_2">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Dirección única que identifica un recurso</p>
</li>
<li>
<p>Estructura predecible y consistente</p>
</li>
<li>
<p>Formato estándar en toda la API</p>
</li>
<li>
<p>Legible y autodescriptiva</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_estructura_base">Estructura Base</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://api.ejemplo.com/v1/usuarios/123
│                      │  │   │        │
│                      │  │   │        └─ Identificador único
│                      │  │   └────────── Nombre del recurso (plural)
│                      │  └────────────── Versión de API
│                      └────────────────── Dominio
└──────────────────────────────────────── Protocolo (HTTPS)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_para_uris">Buenas Prácticas para URIs</h5>
<div class="sect5">
<h6 id="_1_usar_nombres_plurales">1. Usar nombres plurales</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   /api/usuarios
✓ Correcto:   /api/productos
✗ Incorrecto: /api/usuario
✗ Incorrecto: /api/producto</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_2_usar_sustantivos_no_verbos">2. Usar sustantivos, no verbos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   POST /api/usuarios (crear usuario)
✓ Correcto:   GET /api/usuarios/123 (obtener usuario)
✗ Incorrecto: GET /api/getUsuarios
✗ Incorrecto: POST /api/crearUsuario</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_3_jerarquía_clara">3. Jerarquía clara</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   /api/usuarios/123/pedidos
             (Pedidos del usuario 123)

✓ Correcto:   /api/usuarios/123/pedidos/456
             (Pedido 456 del usuario 123)

✗ Incorrecto: /api/pedidos/456/usuarios/123
             (Relación confusa)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_4_evitar_extensiones_de_archivo">4. Evitar extensiones de archivo</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   /api/usuarios/123
✗ Incorrecto: /api/usuarios/123.json
✗ Incorrecto: /api/usuarios/123.xml</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_5_usar_minúsculas_y_guiones">5. Usar minúsculas y guiones</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   /api/usuarios-activos
✓ Correcto:   /api/datos-personales
✗ Incorrecto: /api/usuariosActivos (camelCase)
✗ Incorrecto: /api/USUARIOS (mayúsculas)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_versionado_de_api">Versionado de API</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/v1/usuarios      (Versión 1)
/v2/usuarios      (Versión 2 - cambios incompatibles)

O en header:
X-API-Version: 2</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_parámetros_de_query">Parámetros de Query</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/usuarios?page=1&amp;limit=10&amp;estado=activo

Componentes:
- page=1        (Número de página)
- limit=10      (Cantidad de registros)
- estado=activo (Filtro)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_métodos_http">3. Métodos HTTP</h4>
<div class="sect4">
<h5 id="_definición_3">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Verbos que indican la acción a realizar en un recurso</p>
</li>
<li>
<p>Estándares HTTP definidos en RFC 7231</p>
</li>
<li>
<p>Cada método tiene semántica específica</p>
</li>
<li>
<p>Combinación de método + URI define la operación</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_métodos_principales">Métodos Principales</h5>
<div class="sect5">
<h6 id="_get_obtener_datos">GET - Obtener Datos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semantica: Recuperar información
Seguro: Sí (no modifica el servidor)
Idempotente: Sí (múltiples llamadas = mismo resultado)
Cuerpo de request: No
Cuerpo de response: Sí
Cacheable: Sí

Ejemplos:
GET /api/usuarios             (Obtener todos)
GET /api/usuarios/123         (Obtener uno)
GET /api/usuarios?estado=activo (Con filtros)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_post_crear_datos">POST - Crear Datos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Crear nuevo recurso
Seguro: No (modifica el servidor)
Idempotente: No (cada llamada crea un nuevo)
Cuerpo de request: Sí
Cuerpo de response: Sí (recurso creado)
Cacheable: No

Ejemplo:
POST /api/usuarios
Content-Type: application/json

{
  "nombre": "Juan",
  "email": "juan@example.com"
}

Response:
201 Created
{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com"
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_put_reemplazar_completamente">PUT - Reemplazar Completamente</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Reemplazar recurso completo
Seguro: No
Idempotente: Sí (múltiples llamadas = mismo resultado)
Cuerpo de request: Sí
Cuerpo de response: Sí (opcional)
Cacheable: No

Ejemplo:
PUT /api/usuarios/123
Content-Type: application/json

{
  "nombre": "Juan Modificado",
  "email": "juan.nuevo@example.com"
}

Nota: Se envían TODOS los campos</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_patch_actualizar_parcialmente">PATCH - Actualizar Parcialmente</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Actualizar parcialmente
Seguro: No
Idempotente: Depende de la implementación
Cuerpo de request: Sí
Cuerpo de response: Sí (opcional)
Cacheable: No

Ejemplo:
PATCH /api/usuarios/123
Content-Type: application/json

{
  "email": "juan.nuevo@example.com"
}

Nota: Se envían SOLO los campos a modificar</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_delete_eliminar">DELETE - Eliminar</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Eliminar recurso
Seguro: No
Idempotente: Sí
Cuerpo de request: No
Cuerpo de response: No (normalmente)
Cacheable: No

Ejemplo:
DELETE /api/usuarios/123

Response:
204 No Content</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_head_obtener_metadatos">HEAD - Obtener Metadatos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Como GET pero sin cuerpo de response
Seguro: Sí
Idempotente: Sí
Cuerpo de request: No
Cuerpo de response: No
Uso: Verificar disponibilidad, obtener metadata

Ejemplo:
HEAD /api/usuarios/123

Response headers:
Content-Type: application/json
Content-Length: 1234
Last-Modified: Wed, 21 Oct 2025 07:28:00 GMT</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_options_metadatos_de_operaciones">OPTIONS - Metadatos de Operaciones</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Semántica: Opciones disponibles para un recurso
Seguro: Sí
Idempotente: Sí
Uso: Descubrir métodos permitidos (CORS, etc)

Ejemplo:
OPTIONS /api/usuarios

Response headers:
Allow: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Methods: GET, POST, PUT, DELETE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_comparativa_de_métodos">Comparativa de Métodos</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Método</th>
<th class="tableblock halign-left valign-top">Seguro</th>
<th class="tableblock halign-left valign-top">Idempotente</th>
<th class="tableblock halign-left valign-top">Cacheable</th>
<th class="tableblock halign-left valign-top">Uso Principal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reemplazar completo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depende</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar parcial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadatos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opciones disponibles</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_4_representaciones">4. Representaciones</h4>
<div class="sect4">
<h5 id="_definición_4">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Forma en que se presenta un recurso</p>
</li>
<li>
<p>El mismo recurso puede tener múltiples representaciones</p>
</li>
<li>
<p>Formato independiente del almacenamiento interno</p>
</li>
<li>
<p>Transferencia de estado entre cliente y servidor</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_representaciones_comunes">Representaciones Comunes</h5>
<div class="sect5">
<h6 id="_json_más_común">JSON (Más común)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com",
  "fecha_creacion": "2025-10-21T10:30:00Z"
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_xml">XML</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;usuario&gt;
  &lt;id&gt;123&lt;/id&gt;
  &lt;nombre&gt;Juan&lt;/nombre&gt;
  &lt;email&gt;juan@example.com&lt;/email&gt;
  &lt;fecha_creacion&gt;2025-10-21T10:30:00Z&lt;/fecha_creacion&gt;
&lt;/usuario&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_html">HTML</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;html&gt;
  &lt;body&gt;
    &lt;h1&gt;Usuario&lt;/h1&gt;
    &lt;p&gt;Nombre: Juan&lt;/p&gt;
    &lt;p&gt;Email: juan@example.com&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_content_negotiation">Content Negotiation</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cliente especifica formato deseado mediante header Accept:

GET /api/usuarios/123
Accept: application/json

O mediante query parameter (menos recomendado):

GET /api/usuarios/123?format=json</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_headers_de_representación">Headers de Representación</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Content-Type: application/json; charset=utf-8
Content-Length: 256
Content-Encoding: gzip
Content-Language: es</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_5_códigos_de_estado_http">5. Códigos de Estado HTTP</h4>
<div class="sect4">
<h5 id="_definición_5">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Respuesta estándar que indica el resultado de la solicitud</p>
</li>
<li>
<p>Estructura: 3 dígitos (categoría + código específico)</p>
</li>
<li>
<p>Crítico para REST: comunican el estado de la operación</p>
</li>
<li>
<p>El cliente debe actuar según el código recibido</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_categorías">Categorías</h5>
<div class="sect5">
<h6 id="_2xx_éxito">2xx - Éxito</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>200 OK
  - La solicitud fue exitosa
  - Incluye el resultado esperado

201 Created
  - Recurso creado exitosamente
  - Incluir header Location

202 Accepted
  - Solicitud aceptada pero aún procesándose
  - Para operaciones asincrónicas

204 No Content
  - Éxito pero sin contenido en respuesta
  - Típico en DELETE

206 Partial Content
  - Respuesta parcial (importante para paginación)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_3xx_redirección">3xx - Redirección</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>301 Moved Permanently
  - Recurso movido permanentemente
  - Cliente debe usar nueva URI

302 Found
  - Redirección temporal
  - Cliente puede seguir usando URI antigua

304 Not Modified
  - Recurso no modificado desde última solicitud
  - Usa ETag o Last-Modified

307 Temporary Redirect
  - Redirección temporal con método preservado</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_4xx_error_del_cliente">4xx - Error del Cliente</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>400 Bad Request
  - Solicitud malformada o inválida
  - El cliente debe corregir

401 Unauthorized
  - Autenticación requerida
  - Cliente no autenticado

403 Forbidden
  - Cliente autenticado pero sin permisos
  - No tiene autorización

404 Not Found
  - Recurso no existe
  - URI inválida

409 Conflict
  - Conflicto en el estado del recurso
  - Ej: versión desactualizada

422 Unprocessable Entity
  - Sintaxis válida pero semántica inválida
  - Validación fallida</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_5xx_error_del_servidor">5xx - Error del Servidor</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>500 Internal Server Error
  - Error general en el servidor
  - No específico

501 Not Implemented
  - Funcionalidad no implementada

502 Bad Gateway
  - Gateway o proxy error

503 Service Unavailable
  - Servidor no disponible temporalmente
  - Mantenimiento, sobrecarga</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_uso_correcto_de_códigos">Uso Correcto de Códigos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>POST /api/usuarios
{
  "nombre": "Juan",
  "email": "juan@example.com"
}

✓ 201 Created (Usuario creado)
✗ 200 OK (Incorrecto: debe ser 201)
✗ 204 No Content (Incorrecto: hay que retornar el recurso)

---

GET /api/usuarios/999

✓ 404 Not Found (No existe)
✗ 200 OK (Incorrecto: no existe el recurso)
✗ 500 Internal Server Error (Incorrecto: cliente intentó mal)

---

PATCH /api/usuarios/123
{email: "invalido"}

✓ 422 Unprocessable Entity (Validación falla)
✗ 400 Bad Request (Menos específico)
✗ 200 OK (Incorrecto: no se guardó)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tabla_de_referencia_rápida">Tabla de Referencia Rápida</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Significado</th>
<th class="tableblock halign-left valign-top">Acción Cliente</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuar, datos en respuesta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso creado, verificar Location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operación exitosa, sin datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bad Request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corregir solicitud</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unauthorized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autenticarse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forbidden</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No tiene acceso</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso no existe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resolver conflicto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unprocessable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validar datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reintentar o reportar</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_diseño_de_recursos">3. Diseño de Recursos</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_3_1_identificación_de_recursos">3.1 Identificación de Recursos</h3>
<div class="paragraph">
<p>La identificación correcta de recursos es fundamental para diseñar APIs REST coherentes y mantenibles.</p>
</div>
<div class="sect3">
<h4 id="_1_modelar_como_sustantivos_no_verbos">1. Modelar como Sustantivos, No Verbos</h4>
<div class="sect4">
<h5 id="_principio_fundamental">Principio Fundamental</h5>
<div class="ulist">
<ul>
<li>
<p>Los recursos son entidades, no acciones</p>
</li>
<li>
<p>Se representan con nombres (sustantivos)</p>
</li>
<li>
<p>Los verbos (acciones) se expresan mediante métodos HTTP</p>
</li>
<li>
<p>Esto simplifica la API y la hace más predecible</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_enfoque_incorrecto_orientado_a_acciones">Enfoque Incorrecto (Orientado a Acciones)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET  /api/obtenerUsuarios
POST /api/crearUsuario
PUT  /api/actualizarUsuario/123
POST /api/eliminarUsuario/123
GET  /api/buscarUsuariosPorEmail?email=juan@example.com</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Problemas:</strong>
* Proliferación de endpoints
* Inconsistencia en nomenclatura
* Difícil de mantener y escalar
* No aprovecha HTTP nativamente
* Confunde recursos con operaciones</p>
</div>
</div>
<div class="sect4">
<h5 id="_enfoque_correcto_orientado_a_recursos">Enfoque Correcto (Orientado a Recursos)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET    /api/usuarios              (obtener todos)
POST   /api/usuarios              (crear uno)
GET    /api/usuarios/123          (obtener uno)
PUT    /api/usuarios/123          (actualizar uno)
DELETE /api/usuarios/123          (eliminar uno)
GET    /api/usuarios?email=juan@example.com (buscar)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* Menos endpoints
* Consistencia total
* Fácil de descubrir
* Aprovecha HTTP correctamente
* Métodos HTTP comunican la acción</p>
</div>
</div>
<div class="sect4">
<h5 id="_comparativa_detallada">Comparativa Detallada</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acción</th>
<th class="tableblock halign-left valign-top">❌ Incorrecto (Verbos)</th>
<th class="tableblock halign-left valign-top">✓ Correcto (Sustantivos)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listar todos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/getUsuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener uno</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/getUserById/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/createUser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/updateUser/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/deleteUser/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buscar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/searchUsers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios?query=&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/activateUser/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exportar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/exportUsers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios?format=csv</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_recursos_correctos">Ejemplos de Recursos Correctos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Usuarios:
  /api/usuarios
  /api/usuarios/123
  /api/usuarios/123/perfil
  /api/usuarios/123/preferencias

Productos:
  /api/productos
  /api/productos/456
  /api/productos/456/categorias
  /api/productos/456/resenas

Pedidos:
  /api/pedidos
  /api/pedidos/789
  /api/pedidos/789/items
  /api/pedidos/789/historial

Equipos:
  /api/equipos
  /api/equipos/team-1
  /api/equipos/team-1/miembros
  /api/equipos/team-1/proyectos</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_usar_nombres_plurales">2. Usar Nombres Plurales</h4>
<div class="sect4">
<h5 id="_regla_general">Regla General</h5>
<div class="ulist">
<ul>
<li>
<p>Los endpoints principales SIEMPRE en plural</p>
</li>
<li>
<p>Representa la colección de recursos</p>
</li>
<li>
<p>Aplica incluso si solo existe un recurso</p>
</li>
<li>
<p>Proporciona uniformidad</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_plural_siempre">Plural Siempre</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Correcto:   GET /api/usuarios
✗ Incorrecto: GET /api/usuario

✓ Correcto:   GET /api/configuraciones
✗ Incorrecto: GET /api/configuracion

✓ Correcto:   GET /api/categorias
✗ Incorrecto: GET /api/categoria</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_excepciones_permitidas">Excepciones Permitidas</h5>
<div class="sect5">
<h6 id="_recurso_singleton_único_en_el_sistema">Recurso Singleton (Único en el Sistema)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Casos donde tiene sentido usar singular:

GET /api/perfil           (perfil del usuario autenticado)
GET /api/configuracion    (configuración global del sistema)
GET /api/estadisticas     (estadísticas del sistema)
GET /api/salud            (health check)

Pero mejor práctica:
GET /api/usuarios/me/perfil
GET /api/configuracion-sistema
GET /api/sistema/estadisticas</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rutas_de_acción_especiales">Rutas de Acción Especiales</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>POST /api/usuarios/123/cambiar-contrasena
POST /api/usuarios/123/recuperar-contrasena
POST /api/pedidos/123/confirmar
POST /api/pedidos/123/enviar

Mejor práctica (con sub-recursos):
PATCH /api/usuarios/123 (cambiar campos)
POST /api/usuarios/123/contrasena-reset
PATCH /api/pedidos/123 (estado: confirmado)
POST /api/pedidos/123/envios</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ventajas_del_plural">Ventajas del Plural</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Consistencia</strong>: Todos los endpoints siguen el mismo patrón</p>
</li>
<li>
<p><strong>Escalabilidad</strong>: Fácil agregar nuevos recursos</p>
</li>
<li>
<p><strong>Previsibilidad</strong>: El cliente sabe cómo construir URIs</p>
</li>
<li>
<p><strong>Uniformidad</strong>: No hay excepciones confusas</p>
</li>
<li>
<p><strong>API homogénea</strong>: Mejor experiencia para desarrolladores</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_jerarquía_lógica_de_recursos">3. Jerarquía Lógica de Recursos</h4>
<div class="sect4">
<h5 id="_definición_6">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>Relaciones significativas entre recursos</p>
</li>
<li>
<p>Estructura que refleja el dominio del negocio</p>
</li>
<li>
<p>Profundidad limitada (máximo 2-3 niveles)</p>
</li>
<li>
<p>Claridad en la relación padre-hijo</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_estructura_jerárquica">Estructura Jerárquica</h5>
<div class="sect5">
<h6 id="_nivel_1_colección_principal">Nivel 1: Colección Principal</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/usuarios              (Colección raíz)
/api/productos             (Colección raíz)
/api/pedidos               (Colección raíz)
/api/categorias            (Colección raíz)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nivel_2_recurso_específico">Nivel 2: Recurso Específico</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/usuarios/123          (Usuario 123)
/api/productos/456         (Producto 456)
/api/pedidos/789           (Pedido 789)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nivel_3_sub_recursos">Nivel 3: Sub-recursos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/usuarios/123/pedidos          (Pedidos del usuario 123)
/api/usuarios/123/direcciones      (Direcciones del usuario 123)
/api/productos/456/resenas         (Reseñas del producto 456)
/api/pedidos/789/items             (Items del pedido 789)
/api/pedidos/789/envios            (Envíos del pedido 789)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_jeraquía_correcta">Jeraquía Correcta</h5>
<div class="sect5">
<h6 id="_correcto_relaciones_claras">✓ Correcto: Relaciones Claras</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Estructura lógica:
Empresa
  └─ Equipos
      └─ Miembros
          └─ Tareas

URIs:
GET /api/empresas/1/equipos
GET /api/empresas/1/equipos/5
GET /api/empresas/1/equipos/5/miembros
GET /api/empresas/1/equipos/5/miembros/10
GET /api/empresas/1/equipos/5/miembros/10/tareas</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_incorrecto_anidamiento_excesivo">❌ Incorrecto: Anidamiento Excesivo</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/empresas/1/equipos/5/miembros/10/tareas/20/comentarios/30

Problemas:
- Demasiado profundo
- Lento de procesar
- Difícil de construir URIs
- Acoplamiento innecesario</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_alternativa_usar_ids_directos">Alternativa: Usar IDs Directos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cuando la jerarquía es profunda, usar IDs directos:

Incorrecto profundo:
GET /api/empresas/1/equipos/5/miembros/10/tareas/20

Mejor:
GET /api/tareas/20

O simplificar:
GET /api/empresas/1/tareas?miembro_id=10</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_guía_de_profundidad">Guía de Profundidad</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Profundidad</th>
<th class="tableblock halign-left valign-top">Recomendación</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 nivel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Siempre ok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/api/usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 niveles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Siempre ok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/api/usuarios/123/pedidos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 niveles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ok si relación clara</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/api/usuarios/123/pedidos/456/items</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4+ niveles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ Evitar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/api/empresas/1/equipos/5/miembros/10/tareas/20</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_jerarquías_bien_diseñadas">Ejemplos de Jerarquías Bien Diseñadas</h5>
<div class="sect5">
<h6 id="_e_commerce">E-commerce</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/categorias
/api/categorias/123
/api/categorias/123/productos
/api/categorias/123/productos/456
/api/categorias/123/productos/456/variantes
/api/categorias/123/productos/456/resenas

O para detalles:
/api/productos/456
/api/productos/456/variantes
/api/productos/456/resenas</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_red_social">Red Social</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/usuarios
/api/usuarios/123
/api/usuarios/123/amigos
/api/usuarios/123/publicaciones
/api/usuarios/123/publicaciones/456
/api/usuarios/123/publicaciones/456/comentarios
/api/usuarios/123/publicaciones/456/me-gusta

O simplificado:
/api/publicaciones/456
/api/publicaciones/456/comentarios
/api/comentarios/789/me-gusta</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sistema_de_gestión_de_proyectos">Sistema de Gestión de Proyectos</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/api/proyectos
/api/proyectos/123
/api/proyectos/123/tableros
/api/proyectos/123/tableros/456
/api/proyectos/123/tableros/456/tarjetas

Simplificado:
/api/proyectos/123
/api/tableros/456 (contiene referencia a proyecto)
/api/tarjetas/789</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_cuándo_usar_jerarquía_anidada">Cuándo Usar Jerarquía Anidada</h5>
<div class="sect5">
<h6 id="_usar_anidación_cuando">✓ Usar Anidación Cuando:</h6>
<div class="ulist">
<ul>
<li>
<p>La relación es FUERTEMENTE dependiente</p>
</li>
<li>
<p>El sub-recurso NO tiene significado sin el padre</p>
</li>
<li>
<p>La relación es 1-a-muchos bien definida</p>
</li>
<li>
<p>Simplifica la lógica de negocio</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Ejemplo fuerte:
/api/usuarios/123/direcciones
(Una dirección sin usuario no tiene sentido)

/api/pedidos/456/items
(Un item sin pedido no tiene sentido)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_no_usar_anidación_cuando">❌ NO Usar Anidación Cuando:</h6>
<div class="ulist">
<ul>
<li>
<p>El sub-recurso tiene identidad independiente</p>
</li>
<li>
<p>Se puede acceder sin el padre</p>
</li>
<li>
<p>La relación es muchos-a-muchos</p>
</li>
<li>
<p>El sub-recurso tiene múltiples padres</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Incorrecto:
/api/usuarios/123/productos/456
(Usar: GET /api/productos/456 directamente)

Incorrecto:
/api/articulos/123/etiquetas/456
(Las etiquetas existen independientemente)

Correcto:
GET /api/articulos/123/etiquetas (relación)
GET /api/etiquetas/456 (recurso directo)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_parámetros_query_para_filtrado">Parámetros Query para Filtrado</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>En lugar de anidación excesiva, usar query parameters:

Incorrecto (anidación profunda):
/api/usuarios/123/pedidos?estado=completado

Mejor (con parámetros):
/api/pedidos?usuario_id=123&amp;estado=completado
/api/pedidos?usuario=123&amp;estado=completado&amp;fecha_desde=2025-01-01

Ventajas:
- Más flexible
- Menos profundidad
- Facilita filtrado múltiple
- Mejor reutilización de endpoints</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_resumen_de_buenas_prácticas">Resumen de Buenas Prácticas</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Aspecto</th>
<th class="tableblock halign-left valign-top">✓ Correcto</th>
<th class="tableblock halign-left valign-top">❌ Incorrecto</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nomenclatura</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sustantivos (usuarios)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verbos (getUsuarios)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Número</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plural (usuarios)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Singular (usuario)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Profundidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2-3 niveles máximo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4+ niveles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jerárquica clara</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confusa o aleatoria</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alternativa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filtros y query params</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anidación profunda</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP methods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En la URI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID único</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Composición de IDs</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_3_2_uris_bien_formadas">3.2 URIs Bien Formadas</h3>
<div class="paragraph">
<p>Una URI bien formada es fundamental para crear APIs REST intuitivas, mantenibles y profesionales.</p>
</div>
<div class="sect3">
<h4 id="_1_estructura_clara_y_predecible">1. Estructura Clara y Predecible</h4>
<div class="sect4">
<h5 id="_componentes_de_una_uri">Componentes de una URI</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://api.ejemplo.com/v1/usuarios/123/pedidos
│      │                 │  │      │   │      │
│      │                 │  │      │   │      └─ Recurso específico o ID
│      │                 │  │      │   └────── ID del padre
│      │                 │  │      └────────── Nombre del recurso (plural)
│      │                 └────────────────── Versión de API
│      └────────────────────────────────────── Host/Dominio
└─────────────────────────────────────────────── Esquema (HTTPS)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_estructura_estándar_recomendada">Estructura Estándar Recomendada</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[ESQUEMA]://[DOMINIO]/[VERSIÓN]/[RECURSOS]/[ID]/[SUB-RECURSOS]/[ID]

Ejemplos:
https://api.ejemplo.com/v1/usuarios
https://api.ejemplo.com/v1/usuarios/123
https://api.ejemplo.com/v1/usuarios/123/pedidos
https://api.ejemplo.com/v1/usuarios/123/pedidos/456</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_características_de_buena_formación">Características de Buena Formación</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Predecible</strong>: Siguiendo el patrón, se puede adivinar la URI</p>
</li>
<li>
<p><strong>Consistente</strong>: Todas las URIs siguen la misma estructura</p>
</li>
<li>
<p><strong>Legible</strong>: Fácil de entender sin documentación</p>
</li>
<li>
<p><strong>Escalable</strong>: Fácil agregar nuevos recursos</p>
</li>
<li>
<p><strong>Sin ambigüedad</strong>: No hay confusión sobre lo que representa</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_uris_bien_formadas">✓ URIs Bien Formadas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://api.github.com/v3/users/octocat
https://api.ejemplo.com/v1/productos/123
https://api.ejemplo.com/v1/usuarios/456/pedidos/789
https://api.banco.com/v2/cuentas/cuenta-001/movimientos
https://api.social.com/v1/usuarios/user-123/publicaciones/pub-456</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_uris_mal_formadas">❌ URIs Mal Formadas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://api.ejemplo.com/users/getUser/123           (verbo en URI)
https://api.ejemplo.com/v1/usuarios/123/editar      (acción en URI)
https://api.ejemplo.com/v1/GetUsuarios              (mayúsculas)
https://api.ejemplo.com/v1/usuario_activos          (singular + guiones/underscores)
https://api.ejemplo.com/v1/usuarios/123.json        (extensión de archivo)
https://api.ejemplo.com/v1/usuarios/123?getpedidos  (acción en query)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_patrón_de_construcción">Patrón de Construcción</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nivel</th>
<th class="tableblock halign-left valign-top">Patrón</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/[recurso]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Colección completa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/[recurso]/[id]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso específico</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/[recurso]/[id]/[sub-recurso]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123/pedidos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sub-colección</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/[recurso]/[id]/[sub-recurso]/[id]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123/pedidos/456</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sub-recurso específico</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_2_versionado_de_api">2. Versionado de API</h4>
<div class="paragraph">
<p>El versionado es crítico para mantener compatibilidad mientras evolucionas la API.</p>
</div>
<div class="sect4">
<h5 id="_estrategias_de_versionado">Estrategias de Versionado</h5>
<div class="sect5">
<h6 id="_opción_1_versionado_en_uri_más_común">Opción 1: Versionado en URI (Más común)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://api.ejemplo.com/v1/usuarios
https://api.ejemplo.com/v2/usuarios
https://api.ejemplo.com/v3/usuarios

Ventajas:
* Explícito y visible
* Fácil para routing
* Claro para desarrolladores
* Compatible con cachés

Desventajas:
* Multiplica endpoints
* Duplica código
* Requiere mantener múltiples versiones</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_opción_2_versionado_en_header">Opción 2: Versionado en Header</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/usuarios
X-API-Version: 2

O usando Accept header:
GET /api/usuarios
Accept: application/vnd.ejemplo.v2+json

Ventajas:
* Una única URI
* Menos duplicación
* Más RESTful

Desventajas:
* Menos visible
* Más complejo de debuggear
* Puede confundir a desarrolladores</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_opción_3_versionado_en_query_parameter">Opción 3: Versionado en Query Parameter</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/usuarios?version=2
GET /api/usuarios?v=2

Ventajas:
* Simple de implementar

Desventajas:
* Menos estándar
* Difícil de cachear
* No es la mejor práctica</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_recomendación_versionado_en_uri">Recomendación: Versionado en URI</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ RECOMENDADO:
/v1/usuarios
/v2/usuarios

Razones:
- Estándar en la industria (AWS, GitHub, Twilio)
- Fácil de implementar
- Claro para todos
- Fácil de documentar
- Facilita testing</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_estructura_de_versiones">Estructura de Versiones</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/v1/usuarios              (Primera versión)
/v2/usuarios              (Cambios incompatibles)
/v3/usuarios              (Más cambios incompatibles)

NO hacer:
/v1.0/usuarios            (Usar solo mayor)
/v1_beta/usuarios         (No usar labels)
/usuarios/v1              (Versión al final)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ciclo_de_vida_de_versiones">Ciclo de Vida de Versiones</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Fase 1: Beta/RC (3-6 meses)
  - Disponible pero inestable
  - Headers de advertencia
  - Cambios rápidos permitidos

Fase 2: Producción (Varios años)
  - Versión estable
  - Garantía de compatibilidad
  - Solo cambios backward-compatible

Fase 3: Deprecación (6-12 meses)
  - Anunciar obsolescencia
  - Guiar a nueva versión
  - Headers de deprecación

Fase 4: Retiro (Después de deprecación)
  - Remover completamente
  - Solo si hay alternativa

Ejemplo de timeline:
2024-01-01: v3 lanzada
2024-01-01 - 2025-06-01: v2 production pero deprecated
2025-06-01: v2 retira</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_headers_de_deprecación_recomendados">Headers de Deprecación Recomendados</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>HTTP/1.1 200 OK
Deprecation: true
Sunset: Wed, 31 Dec 2025 23:59:59 GMT
X-API-Warn: "API v1 will be deprecated on 2025-12-31"
Link: &lt;https://api.ejemplo.com/v2/usuarios&gt;; rel="successor-version"

Más moderno (RFC 8594):
Deprecation: true
Sunset: Wed, 31 Dec 2025 23:59:59 GMT</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_guía_de_cuándo_cambiar_de_versión">Guía de Cuándo Cambiar de Versión</h5>
<div class="sect5">
<h6 id="_cambiar_a_nueva_versión_v1_v2">Cambiar a Nueva Versión (v1 → v2)</h6>
<div class="ulist">
<ul>
<li>
<p>Remover endpoints</p>
</li>
<li>
<p>Cambiar formato de respuesta (breaking)</p>
</li>
<li>
<p>Cambiar significado de campos</p>
</li>
<li>
<p>Remover parámetros requeridos</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cambios breaking:
v1: {id: 123, nombre: "Juan"}
v2: {userId: 123, fullName: "Juan"}

v1: GET /usuarios retorna array
v2: GET /usuarios retorna {data: array}

v1: campo "email" requerido
v2: campo "email" opcional</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_no_cambiar_de_versión_mantener_en_v1">No Cambiar de Versión (Mantener en v1)</h6>
<div class="ulist">
<ul>
<li>
<p>Agregar nuevos endpoints</p>
</li>
<li>
<p>Agregar nuevos campos opcionales</p>
</li>
<li>
<p>Agregar parámetros opcionales</p>
</li>
<li>
<p>Cambiar valores internos (no expuestos)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cambios no-breaking:
v1: {id: 123, nombre: "Juan"}
v1: {id: 123, nombre: "Juan", edad: 30}  ✓ Agregar campo

v1: GET /usuarios (requiere auth)
v1: GET /usuarios, GET /usuarios/activos  ✓ Agregar endpoint

v1: limit=10 (por defecto)
v1: limit=10 (nuevamente, o limit=20)  ✓ Cambiar interno</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_evitar_acciones_en_la_uri">3. Evitar Acciones en la URI</h4>
<div class="paragraph">
<p>Una de las violaciones más comunes de REST es incluir acciones como verbos en las URIs.</p>
</div>
<div class="sect4">
<h5 id="_antipatrón_verbos_en_uris">❌ Antipatrón: Verbos en URIs</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/usuarios/obtener
GET /api/usuarios/123/obtener
POST /api/usuarios/crear
POST /api/usuarios/123/actualizar
GET /api/usuarios/123/eliminar
GET /api/usuarios/buscar?nombre=Juan
POST /api/usuarios/123/cambiarEstado?nuevo_estado=activo</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Problemas:</strong>
* Proliferación de endpoints innecesarios
* Confunde recursos con acciones
* No aprovecha HTTP correctamente
* Difícil de mantener y escalar
* Acoplamiento innecesario cliente-servidor</p>
</div>
</div>
<div class="sect4">
<h5 id="_patrón_correcto_métodos_http_como_verbos">✓ Patrón Correcto: Métodos HTTP como Verbos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET /api/usuarios              (obtener todos)
GET /api/usuarios/123          (obtener uno)
POST /api/usuarios             (crear)
PUT /api/usuarios/123          (actualizar completo)
PATCH /api/usuarios/123        (actualizar parcial)
DELETE /api/usuarios/123       (eliminar)
GET /api/usuarios?nombre=Juan  (buscar)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tabla_comparativa_verbos_en_uri_vs_http_methods">Tabla Comparativa: Verbos en URI vs HTTP Methods</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acción</th>
<th class="tableblock halign-left valign-top">❌ Incorrecto</th>
<th class="tableblock halign-left valign-top">✓ Correcto</th>
<th class="tableblock halign-left valign-top">Método HTTP</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener todos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/listar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener uno</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/obtener/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios/crear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /api/usuarios/actualizar/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /api/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios/123/editar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH /api/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/eliminar/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE /api/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buscar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/buscar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios?q=&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET + Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios/123/activar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH /api/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exportar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios/exportar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios?format=csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET + Query</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_casos_especiales_cuándo_permitir_acciones_en_uri">Casos Especiales: Cuándo Permitir Acciones en URI</h5>
<div class="sect5">
<h6 id="_operaciones_complejas_sin_representación_obvia">Operaciones Complejas sin Representación Obvia</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Casos raros donde puede ser aceptable:

POST /api/usuarios/123/cambiar-contrasena
  Body: {contrasena_actual, contrasena_nueva}

POST /api/usuarios/123/reenviar-verificacion

POST /api/pedidos/123/confirmar

POST /api/usuarios/123/login-forzado

Mejor alternativa (más RESTful):
PATCH /api/usuarios/123
  {contrasena: "nueva"}

POST /api/usuarios/123/verificaciones

PATCH /api/pedidos/123
  {estado: "confirmado"}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_búsquedas_complejas">Búsquedas Complejas</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Aceptable:
POST /api/usuarios/buscar
  {criterios_complejos}

Mejor alternativa:
GET /api/usuarios?campo1=valor&amp;campo2=valor&amp;...

Más complejo (GraphQL):
POST /api/graphql
  {query con filtros}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_webhooks_y_callbacks">Webhooks y Callbacks</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>POST /api/webhooks/procesar
POST /api/callbacks/completar-pago</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_regla_de_oro">Regla de Oro</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>SI PUEDES USAR UN MÉTODO HTTP ESTÁNDAR, ÚSALO

GET      → Leer/Recuperar
POST     → Crear/Iniciar proceso
PUT      → Reemplazar completo
PATCH    → Actualizar parcial
DELETE   → Eliminar
HEAD     → Metadatos
OPTIONS  → Opciones disponibles

SOLO si NO encaja en los anteriores, considera una acción en la URI</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_4_ejemplos_correctos_e_incorrectos">4. Ejemplos Correctos e Incorrectos</h4>
<div class="sect4">
<h5 id="_ejemplo_completo_api_de_e_commerce">Ejemplo Completo: API de E-commerce</h5>
<div class="sect5">
<h6 id="_incorrecto_anti_patrón">❌ INCORRECTO (Anti-patrón)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET  /api/getProductos
POST /api/createProducto
GET  /api/getProducto/123
POST /api/updateProducto/123
GET  /api/deleteProducto/123
GET  /api/getCarrito/usuario123
POST /api/addToCart/usuario123
POST /api/removeFromCart/usuario123
GET  /api/checkoutCarrito
POST /api/realizarPago/usuario123
GET  /api/getOrdenes/usuario123
GET  /api/getOrden/usuario123/orden456

Problemas:
- 12 endpoints con verbos
- Inconsistencia (get/Get, create/add)
- No aprovecha HTTP
- Difícil de mantener
- Confunde recursos con acciones</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_correcto_restful">✓ CORRECTO (RESTful)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET    /v1/productos              (listar todos)
POST   /v1/productos              (crear)
GET    /v1/productos/123          (obtener uno)
PUT    /v1/productos/123          (actualizar completo)
PATCH  /v1/productos/123          (actualizar parcial)
DELETE /v1/productos/123          (eliminar)

GET    /v1/usuarios/456/carrito   (obtener carrito)
POST   /v1/usuarios/456/carrito/items  (agregar item)
DELETE /v1/usuarios/456/carrito/items/789 (quitar item)
PATCH  /v1/usuarios/456/carrito   (actualizar carrito)

POST   /v1/usuarios/456/ordenes   (crear orden/checkout)
GET    /v1/usuarios/456/ordenes   (listar órdenes)
GET    /v1/usuarios/456/ordenes/789 (obtener orden)
PATCH  /v1/usuarios/456/ordenes/789 (actualizar orden)

POST   /v1/pagos                   (procesar pago)
GET    /v1/pagos/pago-123         (estado del pago)

Ventajas:
- 6 endpoints principales para productos
- Patrón consistente y predecible
- Fácil de extender
- Aprovecha HTTP correctamente
- Una vez entendido el patrón, todo tiene sentido</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_api_de_red_social">Ejemplo: API de Red Social</h5>
<div class="sect5">
<h6 id="_incorrecto">❌ INCORRECTO</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET  /api/getUser/123
POST /api/updateUser/123
GET  /api/getFollowers/123
POST /api/addFollower/123
GET  /api/getFollowing/123
POST /api/removeFollower/123
GET  /api/getTimeline/123
POST /api/createPost
GET  /api/getPost/456
POST /api/deletePost/456
POST /api/likePost/456
POST /api/unlikePost/456
GET  /api/getComments/456
POST /api/addComment/456
POST /api/deleteComment/789</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_correcto">✓ CORRECTO</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Usuarios:
GET    /v1/usuarios/123
PATCH  /v1/usuarios/123

Relaciones:
GET    /v1/usuarios/123/seguidores
GET    /v1/usuarios/123/siguiendo
POST   /v1/usuarios/123/siguiendo        (seguir a alguien)
DELETE /v1/usuarios/123/siguiendo/456   (dejar de seguir)

Publicaciones:
GET    /v1/usuarios/123/publicaciones
POST   /v1/usuarios/123/publicaciones   (crear post)
GET    /v1/publicaciones/456
DELETE /v1/publicaciones/456

Me gusta:
POST   /v1/publicaciones/456/me-gusta   (dar like)
DELETE /v1/publicaciones/456/me-gusta   (quitar like)

Comentarios:
GET    /v1/publicaciones/456/comentarios
POST   /v1/publicaciones/456/comentarios (crear)
DELETE /v1/comentarios/789

Timeline/Feed:
GET    /v1/usuarios/123/feed (timeline del usuario)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplo_api_de_banco">Ejemplo: API de Banco</h5>
<div class="sect5">
<h6 id="_incorrecto_2">❌ INCORRECTO</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET  /api/getCuentas/usuario123
GET  /api/getCuenta/usuario123/cuenta456
POST /api/transferencia
POST /api/pagarFactura
GET  /api/getTransacciones/usuario123
POST /api/bloquearCuenta/usuario123/cuenta456</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_correcto_2">✓ CORRECTO</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Cuentas:
GET    /v1/usuarios/123/cuentas
POST   /v1/usuarios/123/cuentas          (crear cuenta)
GET    /v1/usuarios/123/cuentas/456     (saldo, detalles)
PATCH  /v1/usuarios/123/cuentas/456     (límites, estado)

Transacciones:
GET    /v1/usuarios/123/cuentas/456/transacciones
POST   /v1/usuarios/123/cuentas/456/transacciones (nueva transacción)
GET    /v1/transacciones/txn-789

Transferencias:
POST   /v1/transferencias
  {from_account, to_account, amount}
GET    /v1/transferencias/tfr-001

Pagos:
POST   /v1/pagos
  {cuenta, factura, monto}
GET    /v1/pagos/pago-123

Bloqueos:
PATCH  /v1/usuarios/123/cuentas/456
  {estado: "bloqueado"}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_checklist_de_bien_formación_de_uris">Checklist de Bien Formación de URIs</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Aspecto</th>
<th class="tableblock halign-left valign-top">✓ Cumple</th>
<th class="tableblock halign-left valign-top">❌ No Cumple</th>
<th class="tableblock halign-left valign-top">Acción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sin verbos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuarios, productos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">getUsuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remover verbo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plural</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuario</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pluralizar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://api&#8230;&#8203" class="bare">https://api&#8230;&#8203</a>;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://api&#8230;&#8203" class="bare">http://api&#8230;&#8203</a>;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usar HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minúsculas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/Usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertir a minúsculas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Guiones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios-activos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios_activos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usar guiones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sin extensión</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123.json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remover .json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versionado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/v1/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Agregar versión</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consistente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mismo patrón siempre</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patrones mixtos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unificar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID en URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios?id=123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mover a path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query params</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios?filtro=valor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usuarios/filtro/valor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usar query</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_aplicar_checklist">Aplicar Checklist</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>URI inicial:   GET /api/getUsuarios_Activos.json

Análisis:
❌ Sin verbos: "get" → Remover
❌ Plural: ok
❌ HTTPS: cambiar a https
✓ Minúsculas: ok (después de remover get)
❌ Guiones: cambiar underscore
❌ Sin extensión: remover .json
❌ Versionado: agregar /v1
✓ Consistente: N/A
✓ ID en URL: N/A
✓ Query params: N/A

URI final:     GET https://api.ejemplo.com/v1/usuarios-activos</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_4_métodos_http">4. Métodos HTTP</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_4_1_métodos_principales">4.1 Métodos Principales</h3>
<div class="paragraph">
<p>Los métodos HTTP son los verbos que definen qué acción realizar sobre un recurso. Cada método tiene semántica, características y casos de uso específicos.</p>
</div>
<div class="sect3">
<h4 id="_1_get_obtener_datos">1. GET - Obtener Datos</h4>
<div class="sect4">
<h5 id="_semántica">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Recuperar información de un recurso</p>
</li>
<li>
<p>No modifica ningún dato en el servidor</p>
</li>
<li>
<p>Solicitud segura (sin efectos secundarios)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_2">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: Sí (no cambia estado del servidor)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Sí (múltiples llamadas = mismo resultado)</p>
</li>
<li>
<p><strong>Cacheable</strong>: Sí (importante para performance)</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: Sí (datos del recurso)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_2">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Obtener todos los recursos
GET /api/usuarios
GET /api/productos

# Obtener un recurso específico
GET /api/usuarios/123
GET /api/productos/456/resenas/789

# Obtener con filtros
GET /api/usuarios?estado=activo&amp;rol=admin
GET /api/productos?categoria=electrónica&amp;precio_max=1000

# Obtener con paginación
GET /api/usuarios?page=1&amp;limit=10
GET /api/articulos?offset=20&amp;limit=5

# Obtener con ordenamiento
GET /api/usuarios?sort=nombre
GET /api/productos?sort=-precio (descendente)

# Búsqueda
GET /api/usuarios?q=juan
GET /api/productos?search=laptop</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_respuestas_comunes">Respuestas Comunes</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Obtener uno (200 OK)
GET /api/usuarios/123

HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com"
}

---

# Obtener muchos (200 OK)
GET /api/usuarios

HTTP/1.1 200 OK
Content-Type: application/json

{
  "data": [
    {"id": 123, "nombre": "Juan"},
    {"id": 124, "nombre": "María"}
  ],
  "meta": {
    "total": 2,
    "page": 1,
    "limit": 10
  }
}

---

# No encontrado (404 Not Found)
GET /api/usuarios/999

HTTP/1.1 404 Not Found
Content-Type: application/json

{
  "error": "Usuario no encontrado",
  "code": "USUARIO_NO_ENCONTRADO"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Usar GET para leer datos
✓ Incluir filtros en query params
✓ Paginar resultados grandes
✓ Usar headers de caché
✓ Retornar 200 OK o 404 Not Found

❌ Usar GET para crear/actualizar/eliminar
❌ Incluir contraseñas en respuesta
❌ Olvidar validar parámetros
❌ Retornar datos sensibles sin autenticación</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_post_crear_recurso">2. POST - Crear Recurso</h4>
<div class="sect4">
<h5 id="_semántica_2">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Crear un nuevo recurso</p>
</li>
<li>
<p>Enviar datos para procesamiento</p>
</li>
<li>
<p>Iniciar una acción/proceso en el servidor</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_3">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: No (modifica el servidor)</p>
</li>
<li>
<p><strong>Idempotente</strong>: No (cada llamada crea uno nuevo)</p>
</li>
<li>
<p><strong>Cacheable</strong>: No (por defecto)</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: Sí (datos a crear)</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: Sí (recurso creado)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_3">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Crear un nuevo recurso
POST /api/usuarios
POST /api/productos
POST /api/pedidos

# Crear en colección anidada
POST /api/usuarios/123/pedidos
POST /api/productos/456/resenas

# Iniciar un proceso
POST /api/transferencias
POST /api/pagos
POST /api/envios

# Búsqueda compleja (alternativa a GET)
POST /api/usuarios/buscar
POST /api/productos/filtrar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_solicitud_y_respuesta">Ejemplos de Solicitud y Respuesta</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Crear usuario (201 Created)
POST /api/usuarios
Content-Type: application/json

{
  "nombre": "Juan",
  "email": "juan@example.com",
  "edad": 30
}

HTTP/1.1 201 Created
Location: /api/usuarios/125
Content-Type: application/json

{
  "id": 125,
  "nombre": "Juan",
  "email": "juan@example.com",
  "edad": 30,
  "fecha_creacion": "2025-10-21T10:30:00Z"
}

---

# Validación fallida (422 Unprocessable Entity)
POST /api/usuarios
Content-Type: application/json

{
  "nombre": "",
  "email": "correo-invalido"
}

HTTP/1.1 422 Unprocessable Entity
Content-Type: application/json

{
  "error": "Validación fallida",
  "errors": {
    "nombre": "Campo requerido",
    "email": "Email inválido"
  }
}

---

# Crear con ID del cliente (idempotencia)
POST /api/pagos
Content-Type: application/json
Idempotency-Key: pago-2025-10-21-001

{
  "monto": 100,
  "cuenta": "cuenta-123"
}

HTTP/1.1 201 Created
{
  "id": "pago-001",
  "monto": 100,
  "estado": "completado"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_headers_importantes">Headers Importantes</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Header Location (obligatorio)
Location: /api/usuarios/125
(Indica dónde está el nuevo recurso)

# Idempotency-Key (para operaciones críticas)
Idempotency-Key: unique-key-123
(Permite reintentos seguros)

# Content-Type
Content-Type: application/json
(Tipo de datos enviados)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_2">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Retornar 201 Created con Location header
✓ Retornar el recurso creado en la respuesta
✓ Usar Idempotency-Key para operaciones críticas
✓ Validar datos antes de crear
✓ Incluir metadatos (id, timestamp, etc)

❌ Retornar 200 OK en lugar de 201
❌ No incluir el recurso creado
❌ Olvidar el header Location
❌ No validar datos de entrada
❌ Permitir duplicados sin idempotencia</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_put_reemplazar_completo">3. PUT - Reemplazar Completo</h4>
<div class="sect4">
<h5 id="_semántica_3">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Reemplazar completamente un recurso existente</p>
</li>
<li>
<p>Se envían TODOS los campos</p>
</li>
<li>
<p>Si no existe, puede crear (depende de implementación)</p>
</li>
<li>
<p>Operación idempotente</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_4">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: No (modifica el servidor)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Sí (múltiples llamadas = mismo resultado)</p>
</li>
<li>
<p><strong>Cacheable</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: Sí (todos los campos)</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: Sí (recurso actualizado) o vacío</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_diferencia_put_vs_patch">Diferencia: PUT vs PATCH</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>PUT - Reemplazar TODO
PATCH - Actualizar PARTE

Ejemplo:
Recurso actual: {id: 123, nombre: "Juan", email: "juan@old.com", edad: 30}

PUT /api/usuarios/123
{
  "nombre": "Juan Nuevo",
  "email": "juan@new.com",
  "edad": 31
}
Resultado: {id: 123, nombre: "Juan Nuevo", email: "juan@new.com", edad: 31}

PATCH /api/usuarios/123
{
  "email": "juan@new.com"
}
Resultado: {id: 123, nombre: "Juan", email: "juan@new.com", edad: 30}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_4">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Actualizar usuario completo
PUT /api/usuarios/123

# Actualizar configuración
PUT /api/configuracion/sistema

# Reemplazar colección completa (raro)
PUT /api/usuarios/123/permisos</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos">Ejemplos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Reemplazar usuario (200 OK)
PUT /api/usuarios/123
Content-Type: application/json

{
  "nombre": "Juan Modificado",
  "email": "juan.nuevo@example.com",
  "edad": 31
}

HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "nombre": "Juan Modificado",
  "email": "juan.nuevo@example.com",
  "edad": 31
}

---

# Campos faltantes (400 Bad Request)
PUT /api/usuarios/123
Content-Type: application/json

{
  "nombre": "Juan"
}

HTTP/1.1 400 Bad Request
{
  "error": "Faltan campos requeridos",
  "campos_faltantes": ["email", "edad"]
}

---

# Recurso no existe (404 Not Found)
PUT /api/usuarios/999
Content-Type: application/json

{
  "nombre": "Usuario Nuevo",
  "email": "usuario@example.com",
  "edad": 25
}

HTTP/1.1 404 Not Found
{
  "error": "Usuario no encontrado"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_3">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Validar que se envíen TODOS los campos requeridos
✓ Retornar 200 OK con recurso actualizado
✓ Ser idempotente (misma llamada = mismo resultado)
✓ Documentar campos requeridos
✓ Retornar 404 si no existe

❌ Permitir actualizaciones parciales (usar PATCH)
❌ Retornar 201 Created
❌ Aceptar campos faltantes sin error
❌ Modificar el ID</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_4_patch_actualizar_parcialmente">4. PATCH - Actualizar Parcialmente</h4>
<div class="sect4">
<h5 id="_semántica_4">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Actualizar parcialmente un recurso</p>
</li>
<li>
<p>Se envían SOLO los campos a cambiar</p>
</li>
<li>
<p>Operación más flexible que PUT</p>
</li>
<li>
<p>Idempotencia depende de la implementación</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_5">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: No (modifica el servidor)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Depende (recomendable que sí)</p>
</li>
<li>
<p><strong>Cacheable</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: Sí (solo campos a cambiar)</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: Sí (recurso actualizado)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_más_comunes_que_put">Casos de Uso (Más Comunes que PUT)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Actualizar un campo
PATCH /api/usuarios/123
{"email": "nuevo@example.com"}

# Actualizar varios campos
PATCH /api/usuarios/123
{"email": "nuevo@example.com", "edad": 31}

# Cambiar estado
PATCH /api/pedidos/456
{"estado": "confirmado"}

# Actualizar preferencias
PATCH /api/usuarios/123/preferencias
{"notificaciones": false, "idioma": "es"}

# Cambiar configuración
PATCH /api/configuracion
{"timeout": 30000, "max_conexiones": 100}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_2">Ejemplos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Actualizar parcial (200 OK)
PATCH /api/usuarios/123
Content-Type: application/json

{
  "email": "juan.nuevo@example.com"
}

HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "nombre": "Juan",
  "email": "juan.nuevo@example.com",
  "edad": 30
}

---

# Validación fallida (422 Unprocessable)
PATCH /api/usuarios/123
Content-Type: application/json

{
  "email": "correo-invalido"
}

HTTP/1.1 422 Unprocessable Entity
{
  "error": "Email inválido",
  "campo": "email"
}

---

# Sin cambios (200 OK)
PATCH /api/usuarios/123
Content-Type: application/json

{
  "email": "juan.nuevo@example.com"
}

HTTP/1.1 200 OK
(Retorna el mismo recurso)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_patch_json_vs_json_merge_patch_vs_json_patch">PATCH JSON vs JSON Merge Patch vs JSON Patch</h5>
<div class="sect5">
<h6 id="_simple_recomendado_para_apis_rest">Simple (Recomendado para APIs REST)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">PATCH /api/usuarios/123
Content-Type: application/json

{
  "email": "nuevo@example.com",
  "edad": 31
}

# Solo envía los campos a cambiar</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_2_json_merge_patch_rfc_7386">2. JSON Merge Patch (RFC 7386)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">PATCH /api/usuarios/123
Content-Type: application/merge-patch+json

{
  "email": "nuevo@example.com",
  "edad": 31
}

# Más formal, para APIs complejas</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_json_patch_rfc_6902">JSON Patch (RFC 6902)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">PATCH /api/usuarios/123
Content-Type: application/json-patch+json

[
  {"op": "replace", "path": "/email", "value": "nuevo@example.com"},
  {"op": "replace", "path": "/edad", "value": 31}
]

# Muy formal, para operaciones complejas</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_4">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Usar PATCH en lugar de PUT (más flexible)
✓ Retornar recurso completo actualizado
✓ Validar campos parciales
✓ Ser idempotente si es posible
✓ Documentar qué campos se pueden cambiar

❌ Requerir todos los campos
❌ Cambiar campos no permitidos
❌ Cambiar el ID
❌ Retornar datos parciales</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_5_delete_eliminar_recurso">5. DELETE - Eliminar Recurso</h4>
<div class="sect4">
<h5 id="_semántica_5">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Eliminar un recurso existente</p>
</li>
<li>
<p>Operación idempotente</p>
</li>
<li>
<p>Después de eliminar, GET retorna 404</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_6">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: No (modifica el servidor)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Sí (múltiples llamadas = mismo resultado)</p>
</li>
<li>
<p><strong>Cacheable</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: No (normalmente)</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: No (normalmente)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_5">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Eliminar un recurso
DELETE /api/usuarios/123
DELETE /api/productos/456

# Eliminar en colección anidada
DELETE /api/usuarios/123/pedidos/456

# Eliminar con confirmación
DELETE /api/datos-criticos/789?confirm=true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_3">Ejemplos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Eliminar exitoso (204 No Content)
DELETE /api/usuarios/123

HTTP/1.1 204 No Content

---

# Eliminar y retornar datos (200 OK)
DELETE /api/usuarios/123

HTTP/1.1 200 OK
{
  "id": 123,
  "nombre": "Juan",
  "estado": "eliminado"
}

---

# No existe (404 Not Found)
DELETE /api/usuarios/999

HTTP/1.1 404 Not Found
{
  "error": "Usuario no encontrado"
}

---

# Sin permisos (403 Forbidden)
DELETE /api/usuarios/123

HTTP/1.1 403 Forbidden
{
  "error": "No tienes permiso para eliminar"
}

---

# Soft delete (marcar como eliminado)
DELETE /api/usuarios/123

HTTP/1.1 200 OK
{
  "id": 123,
  "estado": "eliminado",
  "fecha_eliminacion": "2025-10-21T10:30:00Z"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_eliminación_hard_vs_soft_delete">Eliminación: Hard vs Soft Delete</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Hard Delete (Físico):
- Se elimina completamente de la BD
- No se puede recuperar
- Usa espacio
- Mejor para datos no sensibles

DELETE /api/usuarios/123

Soft Delete (Lógico):
- Se marca como eliminado (campo estado)
- Se puede recuperar
- Mantiene integridad referencial
- Mejor para datos críticos

DELETE /api/usuarios/123
Internamente: UPDATE usuarios SET estado='eliminado' WHERE id=123</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_5">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Retornar 204 No Content o 200 OK
✓ Ser idempotente (segundo DELETE = 204)
✓ Validar permisos antes de eliminar
✓ Usar soft delete para datos críticos
✓ Incluir confirmación para datos sensibles

❌ Usar GET para eliminar
❌ Retornar 200 OK si ya está eliminado
❌ No validar permisos
❌ Eliminar datos sin confirmación
❌ Hard delete datos críticos</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_head_obtener_metadatos">6. HEAD - Obtener Metadatos</h4>
<div class="sect4">
<h5 id="_semántica_6">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Idéntico a GET pero SIN cuerpo de respuesta</p>
</li>
<li>
<p>Solo headers</p>
</li>
<li>
<p>Verificar disponibilidad sin descargar datos</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_7">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: Sí (no modifica)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Sí</p>
</li>
<li>
<p><strong>Cacheable</strong>: Sí</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: No (solo headers)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_6">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Verificar si existe
HEAD /api/usuarios/123

# Obtener información sin descargar recurso
HEAD /api/archivos/documento.pdf

# Verificar última modificación
HEAD /api/usuarios/123

# Obtener tamaño
HEAD /api/videos/video-1080p.mp4</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_4">Ejemplos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Verificar existencia
HEAD /api/usuarios/123

HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 256
Last-Modified: Wed, 21 Oct 2025 07:28:00 GMT
ETag: "33a64df551"

(Sin cuerpo)

---

# No existe
HEAD /api/usuarios/999

HTTP/1.1 404 Not Found

---

# Archivo grande
HEAD /api/archivos/video-1080p.mp4

HTTP/1.1 200 OK
Content-Type: video/mp4
Content-Length: 2147483648
Last-Modified: Wed, 20 Oct 2025 14:00:00 GMT</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_6">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Retornar los mismos headers que GET
✓ Usar para verificaciones rápidas
✓ Implementar HEAD si se implementa GET
✓ No incluir cuerpo en respuesta

❌ Retornar cuerpo en respuesta
❌ Cambiar headers respecto a GET
❌ Ignorar HEAD en la implementación</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_options_opciones_disponibles">7. OPTIONS - Opciones Disponibles</h4>
<div class="sect4">
<h5 id="_semántica_7">Semántica</h5>
<div class="ulist">
<ul>
<li>
<p>Describir opciones de comunicación disponibles</p>
</li>
<li>
<p>Descubrir métodos permitidos</p>
</li>
<li>
<p>CORS (Cross-Origin Resource Sharing)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_características_8">Características</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Seguro</strong>: Sí (no modifica)</p>
</li>
<li>
<p><strong>Idempotente</strong>: Sí</p>
</li>
<li>
<p><strong>Cacheable</strong>: Sí</p>
</li>
<li>
<p><strong>Cuerpo de request</strong>: No</p>
</li>
<li>
<p><strong>Cuerpo de response</strong>: Normalmente no</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_casos_de_uso_7">Casos de Uso</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Descubrir métodos permitidos
OPTIONS /api/usuarios

# CORS preflight
OPTIONS /api/usuarios/123

# Descubrir headers permitidos
OPTIONS /api/productos</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_5">Ejemplos</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Métodos permitidos
OPTIONS /api/usuarios

HTTP/1.1 200 OK
Allow: GET, POST, PUT, DELETE, OPTIONS
Content-Type: application/json

---

# Con CORS
OPTIONS /api/usuarios

HTTP/1.1 200 OK
Allow: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Max-Age: 3600

---

# Métodos restringidos
OPTIONS /api/estadisticas

HTTP/1.1 200 OK
Allow: GET, OPTIONS
(Sin POST, PUT, DELETE)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_7">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Incluir header Allow
✓ Implementar CORS correctamente
✓ Usar para discovery
✓ Cachear respuestas OPTIONS

❌ Ignorar OPTIONS
❌ Permitir métodos no implementados
❌ No incluir headers CORS</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tabla_comparativa_de_métodos">Tabla Comparativa de Métodos</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Método</th>
<th class="tableblock halign-left valign-top">Seguro</th>
<th class="tableblock halign-left valign-top">Idempotente</th>
<th class="tableblock halign-left valign-top">Cacheable</th>
<th class="tableblock halign-left valign-top">Cuerpo Req</th>
<th class="tableblock halign-left valign-top">Cuerpo Res</th>
<th class="tableblock halign-left valign-top">Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí/No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reemplazar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depende</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar parcial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadatos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descubrir</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_seleccionar_el_método_correcto">Seleccionar el Método Correcto</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Necesidad</th>
<th class="tableblock halign-left valign-top">Método</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener datos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /api/usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear dato</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /api/usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reemplazar completo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar parcial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verificar disponibilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD /api/usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descubrir opciones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS /api/usuarios</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_semántica_y_buenas_prácticas">4.2 Semántica y Buenas Prácticas</h3>
<div class="paragraph">
<p>La semántica HTTP es crítica para crear APIs REST predecibles y mantenibles.</p>
</div>
<div class="sect3">
<h4 id="_idempotencia">Idempotencia</h4>
<div class="sect4">
<h5 id="_definición_7">Definición</h5>
<div class="paragraph">
<p>Una operación es <strong>idempotente</strong> si realizar varias llamadas idénticas produce el mismo resultado que una sola llamada.</p>
</div>
</div>
<div class="sect4">
<h5 id="_métodos_idempotentes">Métodos Idempotentes</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET    - Idempotente (siempre retorna lo mismo)
HEAD   - Idempotente
OPTIONS - Idempotente
PUT    - Idempotente (reemplaza igual cada vez)
DELETE - Idempotente (segundo DELETE = 404 pero estado igual)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_métodos_no_idempotentes">Métodos NO Idempotentes</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>POST   - NO idempotente (cada llamada crea nuevo)
PATCH  - Depende (algunos casos no son idempotentes)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_idempotencia">Ejemplos de Idempotencia</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">GET - Idempotente ✓
GET /api/usuarios/123  →  {id: 123, nombre: "Juan"}
GET /api/usuarios/123  →  {id: 123, nombre: "Juan"}  (Igual)

---

PUT - Idempotente ✓
PUT /api/usuarios/123  {nombre: "Juan Nuevo"}  →  Actualizado
PUT /api/usuarios/123  {nombre: "Juan Nuevo"}  →  Igual estado

---

POST - NO Idempotente ✗
POST /api/usuarios  {nombre: "Juan"}  →  Crea usuario 1
POST /api/usuarios  {nombre: "Juan"}  →  Crea usuario 2 (Diferente!)

---

PATCH - NO Idempotente ✗ (Depende)
PATCH /api/contador  {sumar: 1}  →  contador = 11
PATCH /api/contador  {sumar: 1}  →  contador = 12 (Diferente!)

---

PATCH - Idempotente ✓ (Si es asignación)
PATCH /api/usuarios/123  {email: "nuevo@example.com"}  →  actualizado
PATCH /api/usuarios/123  {email: "nuevo@example.com"}  →  igual</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_cómo_hacer_post_idempotente_crítico_para_pagos">Cómo Hacer POST Idempotente (Crítico para Pagos)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Usar Idempotency-Key header
POST /api/pagos
Idempotency-Key: pago-2025-10-21-001
Content-Type: application/json

{
  "monto": 100,
  "cuenta": "cuenta-123"
}

# Primera llamada → Crea y procesa
# Segunda llamada con mismo key → Retorna resultado anterior sin duplicar

HTTP/1.1 201 Created
{
  "id": "pago-001",
  "monto": 100,
  "estado": "completado"
}

# Segunda llamada idéntica
HTTP/1.1 200 OK  (Nota: 200, no 201)
{
  "id": "pago-001",
  "monto": 100,
  "estado": "completado"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_8">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Respetar idempotencia de métodos
✓ Usar Idempotency-Key para POST críticos
✓ Documentar si operación es idempotente
✓ Facilitar reintentos seguros

❌ Ignorar idempotencia
❌ Crear duplicados en POST
❌ No proporcionar forma de hacer idempotente</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_seguridad_de_métodos">Seguridad de Métodos</h4>
<div class="sect4">
<h5 id="_métodos_seguros">Métodos Seguros</h5>
<div class="paragraph">
<p>Un método es <strong>seguro</strong> si no modifica el estado del servidor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Métodos Seguros:
- GET (solo lectura)
- HEAD (solo lectura)
- OPTIONS (solo información)

Métodos NO Seguros:
- POST (puede crear)
- PUT (modifica)
- PATCH (modifica)
- DELETE (elimina)

Implicaciones:
- Métodos seguros pueden cachearse
- No requieren confirmación de usuario
- No generan efectos secundarios</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_9">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Usar métodos seguros solo para lectura
✓ Proteger métodos no seguros con autenticación
✓ Requerir HTTPS para operaciones sensibles
✓ Limitar tasa (rate limiting) en métodos costosos

❌ Usar GET para crear/modificar datos
❌ Confiar en métodos para seguridad
❌ Usar HTTP (sin encriptación) para datos sensibles</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validación_de_entrada">Validación de Entrada</h4>
<div class="sect4">
<h5 id="_validación_en_solicitud">Validación en Solicitud</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Validar tipos de datos
POST /api/usuarios
{
  "nombre": 123,          ❌ Debe ser string
  "email": "invalido",    ❌ Email inválido
  "edad": -5              ❌ Debe ser positivo
}

HTTP/1.1 422 Unprocessable Entity
{
  "error": "Validación fallida",
  "errors": {
    "nombre": "Debe ser texto",
    "email": "Email inválido",
    "edad": "Debe ser mayor a 0"
  }
}

---

# Validar campos requeridos
POST /api/usuarios
{
  "nombre": "Juan"
  // Falta: email, edad
}

HTTP/1.1 422 Unprocessable Entity
{
  "error": "Campos requeridos faltantes",
  "campos_faltantes": ["email", "edad"]
}

---

# Validar tamaño
POST /api/comentarios
{
  "texto": "Lorem ipsum..." (10000 caracteres) ❌ Max 1000
}

HTTP/1.1 422 Unprocessable Entity
{
  "error": "Texto demasiado largo",
  "max_caracteres": 1000
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validar_datos_duplicados">Validar Datos Duplicados</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Email duplicado
POST /api/usuarios
{
  "nombre": "Juan",
  "email": "juan@example.com"  ❌ Ya existe
}

HTTP/1.1 409 Conflict
{
  "error": "Email ya registrado",
  "campo": "email"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validar_integridad_referencial">Validar Integridad Referencial</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Crear pedido con usuario inexistente
POST /api/pedidos
{
  "usuario_id": 999,  ❌ Usuario no existe
  "monto": 100
}

HTTP/1.1 422 Unprocessable Entity
{
  "error": "Usuario no encontrado",
  "campo": "usuario_id"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_10">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Validar todos los inputs del cliente
✓ Retornar errores descriptivos
✓ Validar tipos de datos
✓ Validar rangos y límites
✓ Validar integridad referencial
✓ Usar código 422 para validación

❌ Confiar en datos del cliente
❌ Validación solo en frontend
❌ Errores genéricos
❌ Aceptar datos inválidos</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manejo_de_errores_consistente">Manejo de Errores Consistente</h4>
<div class="sect4">
<h5 id="_estructura_de_error_recomendada">Estructura de Error Recomendada</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "error": "Descripción legible del error",
  "code": "CODIGO_ERROR",
  "status": 422,
  "timestamp": "2025-10-21T10:30:00Z",
  "path": "/api/usuarios",
  "message": "Validación fallida",
  "details": {
    "email": "Email inválido",
    "edad": "Debe ser mayor a 18"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ejemplos_de_errores_consistentes">Ejemplos de Errores Consistentes</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># 400 - Solicitud Malformada
HTTP/1.1 400 Bad Request
{
  "error": "JSON inválido",
  "code": "INVALID_JSON",
  "message": "No se puede parsear JSON"
}

---

# 401 - No Autenticado
HTTP/1.1 401 Unauthorized
{
  "error": "Autenticación requerida",
  "code": "UNAUTHORIZED",
  "message": "Token expirado o inválido"
}

---

# 403 - Sin Permiso
HTTP/1.1 403 Forbidden
{
  "error": "Acceso denegado",
  "code": "FORBIDDEN",
  "message": "No tienes permiso para acceder a este recurso"
}

---

# 404 - No Encontrado
HTTP/1.1 404 Not Found
{
  "error": "Recurso no encontrado",
  "code": "NOT_FOUND",
  "message": "Usuario con ID 999 no existe"
}

---

# 409 - Conflicto
HTTP/1.1 409 Conflict
{
  "error": "Conflicto",
  "code": "DUPLICATE_EMAIL",
  "message": "Email ya registrado en el sistema"
}

---

# 422 - No Procesable
HTTP/1.1 422 Unprocessable Entity
{
  "error": "Validación fallida",
  "code": "VALIDATION_ERROR",
  "details": {
    "email": "Email inválido",
    "edad": "Debe ser número"
  }
}

---

# 429 - Too Many Requests
HTTP/1.1 429 Too Many Requests
{
  "error": "Límite de solicitudes excedido",
  "code": "RATE_LIMIT_EXCEEDED",
  "retry_after": 60
}

---

# 500 - Error del Servidor
HTTP/1.1 500 Internal Server Error
{
  "error": "Error interno del servidor",
  "code": "INTERNAL_SERVER_ERROR",
  "message": "Ha ocurrido un error inesperado",
  "request_id": "req-123456"  (Para debugging)
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buenas_prácticas_11">Buenas Prácticas</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>✓ Estructura consistente de errores
✓ Incluir código de error específico
✓ Mensajes claros y útiles
✓ Incluir detalles cuando sea útil
✓ Incluir timestamp
✓ Incluir request ID (para debugging)

❌ Errores genéricos ("Error")
❌ Exponer detalles internos
❌ Inconsistencia en estructura
❌ Sin información útil para debuggear</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_seleccionar_método_correcto">Resumen: Seleccionar Método Correcto</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operación</th>
<th class="tableblock halign-left valign-top">Método</th>
<th class="tableblock halign-left valign-top">Código Éxito</th>
<th class="tableblock halign-left valign-top">Idempotente</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtener uno</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar todo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar parcial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depende</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH /usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE /usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verificar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD /usuarios/123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opciones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS /usuarios</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_semántica_y_buenas_prácticas_2">4.2 Semántica y Buenas Prácticas</h3>
<div class="sect3">
<h4 id="_4_2_1_idempotencia">4.2.1 Idempotencia</h4>
<div class="paragraph">
<p>La idempotencia es una propiedad fundamental en el diseño de APIs REST que garantiza que ejecutar una operación múltiples veces produce el mismo resultado que ejecutarla una sola vez.</p>
</div>
<div class="paragraph">
<p><strong>Operaciones Idempotentes:</strong>
* GET: Siempre devuelve el mismo resultado sin cambiar el estado del servidor
* HEAD: Similar a GET pero sin devolver el cuerpo de la respuesta
* PUT: Actualizar un recurso múltiples veces con los mismos datos produce el mismo estado
* DELETE: Eliminar un recurso es idempotente; eliminar algo ya eliminado devuelve el mismo resultado</p>
</div>
<div class="paragraph">
<p><strong>Operaciones NO Idempotentes:</strong>
* POST: Cada ejecución crea un nuevo recurso, generando resultados diferentes
* PATCH: Puede tener efectos acumulativos dependiendo de la implementación</p>
</div>
<div class="paragraph">
<p><strong>Beneficios:</strong>
* Permite reintentos seguros en caso de fallos de red
* Facilita la recuperación ante errores de conectividad
* Simplifica el diseño de clientes resilientes</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Primera llamada
PUT /api/usuarios/123 HTTP/1.1
Content-Type: application/json
{"nombre": "Juan", "edad": 30}
# Respuesta: 200 OK

# Segunda llamada idéntica
PUT /api/usuarios/123 HTTP/1.1
Content-Type: application/json
{"nombre": "Juan", "edad": 30}
# Respuesta: 200 OK (mismo resultado, el usuario no cambia)

# POST es diferente - NO es idempotente
POST /api/usuarios HTTP/1.1
Content-Type: application/json
{"nombre": "Juan", "edad": 30}
# Primera vez: 201 Created (usuario1)
# Segunda vez: 201 Created (usuario2) - ¡Nuevo usuario diferente!</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_4_2_2_seguridad">4.2.2 Seguridad</h4>
<div class="paragraph">
<p>La seguridad en APIs REST es crítica para proteger tanto los datos como la integridad del sistema. Implica múltiples capas de protección:</p>
</div>
<div class="paragraph">
<p><strong>Autenticación:</strong>
* Verificar la identidad del cliente que realiza la solicitud
* Métodos comunes:
  - OAuth 2.0: Protocolo estándar para delegación de acceso
  - JWT (JSON Web Tokens): Tokens auto-contenidos y digitalmente firmados
  - Basic Auth: Usuario y contraseña en Base64 (solo con HTTPS)
  - API Keys: Tokens simples para aplicaciones de máquina a máquina</p>
</div>
<div class="paragraph">
<p><strong>Autorización:</strong>
* Verificar qué permisos tiene el usuario autenticado
* Implementar control de acceso basado en roles (RBAC)
* Validar que el usuario solo acceda a sus propios recursos</p>
</div>
<div class="paragraph">
<p><strong>Transport Security:</strong>
* HTTPS es obligatorio para proteger datos en tránsito
* Certificados SSL/TLS válidos y actualizados
* TLS 1.2 como mínimo (preferiblemente 1.3)</p>
</div>
<div class="paragraph">
<p><strong>Validación de Entrada:</strong>
* Sanitizar y validar todos los parámetros recibidos
* Proteger contra inyección SQL, XSS, CSRF
* Limitar tamaños de payload
* Usar listas blancas de caracteres permitidos</p>
</div>
<div class="paragraph">
<p><strong>Limitación de Tasa (Rate Limiting):</strong>
* Prevenir abuso y ataques de denegación de servicio (DoS)
* Implementar throttling por cliente/IP
* Devolver encabezados HTTP-RateLimit-*</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Solicitud con JWT
GET /api/usuarios/123 HTTP/1.1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
X-API-Key: sk_live_xyz123

# Respuesta con encabezados de seguridad
HTTP/1.1 200 OK
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
Content-Security-Policy: default-src 'self'
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1635724800</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_4_2_3_lado_del_servidor">4.2.3 Lado del Servidor</h4>
<div class="paragraph">
<p>Las consideraciones del lado del servidor incluyen aspectos de diseño e implementación que afectan cómo la API maneja las solicitudes:</p>
</div>
<div class="paragraph">
<p><strong>Gestión de Estado:</strong>
* Las APIs REST deben ser stateless: cada solicitud contiene toda la información necesaria
* El servidor no debe almacenar contexto de cliente entre solicitudes
* Facilita escalabilidad horizontal y load balancing</p>
</div>
<div class="paragraph">
<p><strong>Paginación:</strong>
* Implementar para grandes conjuntos de datos
* Usar parámetros estándar: <code>limit</code>, <code>offset</code> o <code>page</code>, <code>size</code>
* Incluir metadatos de paginación en la respuesta</p>
</div>
<div class="paragraph">
<p><strong>Filtrado y Búsqueda:</strong>
* Permitir filtrado de resultados: <code>/api/usuarios?estado=activo&amp;edad=30</code>
* Soportar búsqueda: <code>/api/usuarios?q=Juan</code>
* Validar y limitar opciones de filtrado</p>
</div>
<div class="paragraph">
<p><strong>Caché:</strong>
* Usar encabezados HTTP Cache-Control apropiados
* ETag para validación condicional
* Implementar caché del lado del servidor cuando sea necesario</p>
</div>
<div class="paragraph">
<p><strong>Manejo de Errores:</strong>
* Respuestas de error estructuradas y consistentes
* Incluir códigos de error específicos, mensajes y detalles
* Log detallado de errores para debugging</p>
</div>
<div class="paragraph">
<p><strong>Versionado de API:</strong>
* Mantener compatibilidad hacia atrás
* Versionar en la URL (<code>/v1/usuarios</code>) o encabezado
* Deprecar versiones antiguas gradualmente</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo de respuesta del servidor:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 1, "nombre": "Juan", "email": "juan@example.com"},
    {"id": 2, "nombre": "María", "email": "maria@example.com"}
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 42,
    "pages": 5
  },
  "links": {
    "self": "/api/v1/usuarios?page=1&amp;limit=10",
    "next": "/api/v1/usuarios?page=2&amp;limit=10",
    "last": "/api/v1/usuarios?page=5&amp;limit=10"
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_códigos_de_estado_http_2">5. Códigos de Estado HTTP</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_5_1_respuestas_2xx_éxito">5.1 Respuestas 2xx (Éxito)</h3>
<div class="paragraph">
<p>Los códigos 2xx indican que la solicitud fue exitosa. La acción fue recibida, comprendida y aceptada correctamente.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Uso típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue exitosa y se devuelven los datos solicitados en el cuerpo de la respuesta.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET, PUT, POST con resultado inmediato</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue exitosa y se creó un nuevo recurso. El encabezado <code>Location</code> debe incluir la URL del recurso creado.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST al crear un nuevo recurso</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">202</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accepted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue aceptada para procesamiento pero aún no se ha completado. Se utiliza para operaciones asincrónicas.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tareas de largo procesamiento, operaciones batch, trabajos en segundo plano</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">203</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-Authoritative Information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue exitosa pero los datos devueltos no provienen del servidor original, sino de una réplica o cache.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Respuestas desde proxies, caches intermedios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue exitosa pero no hay contenido que devolver. El cuerpo de la respuesta está vacío.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE exitoso, PUT/POST sin necesidad de devolver datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">205</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reset Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue exitosa. Le indica al cliente que debe resetear la vista del documento que causó la solicitud.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formularios enviados exitosamente que requieren limpiar la interfaz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">206</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partial Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud fue parcialmente exitosa. Solo se devuelve una parte del recurso solicitado (usado para descargas reanudables).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descargas de archivos grandes, streaming de video/audio, solicitudes HTTP Range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">207</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La respuesta contiene múltiples códigos de estado independientes (utilizado en WebDAV).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operaciones en batch donde algunos recursos tienen éxito y otros fallan</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">208</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Already Reported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los miembros de una vinculación se han incluido anteriormente (utilizado en WebDAV).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Respuestas WebDAV complejas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">226</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IM Used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor ha cumplido una solicitud GET y la respuesta contiene representaciones de uno o más resultados.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negociación de contenido avanzada</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_5_2_respuestas_3xx_redirección">5.2 Respuestas 3xx (Redirección)</h3>
<div class="paragraph">
<p>Los códigos 3xx indican que se requieren acciones adicionales para completar la solicitud. Típicamente implican redirecciones a otra ubicación o validación condicional.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Uso típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple Choices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hay múltiples opciones para el recurso solicitado. El cliente debe elegir una de ellas (raramente usado en APIs REST).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cuando existen múltiples representaciones del mismo recurso</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved Permanently</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso se ha movido permanentemente a una nueva URL. Los clientes deben actualizar sus referencias a la nueva ubicación.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cambios permanentes de estructura de API, migración de recursos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso se ha encontrado en una URL diferente temporalmente. El cliente debe seguir la redirección en el encabezado <code>Location</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirecciones temporales, mantenimiento de servidor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See Other</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La respuesta a la solicitud puede encontrarse bajo una URL diferente. Usado típicamente para redireccionar después de POST/PUT/DELETE.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST que genera un recurso y redirige a su ubicación, separar escritura de lectura</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Modified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso no ha sido modificado desde la última solicitud. El cliente puede usar su versión en caché. No incluye cuerpo de respuesta.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negociación condicional con encabezados If-Modified-Since, If-None-Match, ETags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">305</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use Proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso debe ser accedido a través de un proxy especificado en el encabezado <code>Location</code> (obsoleto).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy raramente usado en APIs REST modernas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">307</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temporary Redirect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirección temporal similar a 302, pero garantiza que el método HTTP no cambiará en la redirección.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirecciones temporales donde es crítico mantener el verbo HTTP (POST → POST)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">308</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permanent Redirect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirección permanente similar a 301, pero garantiza que el método HTTP no cambiará en la redirección.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cambios permanentes donde es crítico mantener el verbo HTTP (PUT → PUT)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">310</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Too Many Redirects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se han alcanzado demasiadas redirecciones (no es un código estándar HTTP, pero es usado por algunos navegadores).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Detectar bucles de redirección</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">311</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to New URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se recomienda ir a una nueva URI, pero no es una redirección obligatoria (experimental/no estándar).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sugerencias de cambio de URL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_5_3_respuestas_4xx_error_del_cliente">5.3 Respuestas 4xx (Error del Cliente)</h3>
<div class="paragraph">
<p>Los códigos 4xx indican que hay un error en la solicitud del cliente. El error es responsabilidad del cliente y no del servidor.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Uso típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bad Request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud es inválida o malformada. El servidor no puede o no procesará la solicitud debido a un error del cliente.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parámetros inválidos, JSON malformado, sintaxis incorrecta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unauthorized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud requiere autenticación y el cliente no ha proporcionado credenciales válidas o están ausentes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Falta de token JWT, credenciales expiradas, usuario no autenticado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">402</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payment Required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud requiere pago. Reservado para uso futuro en protocolos de pagos digitales.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suscripciones vencidas, límite de crédito alcanzado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forbidden</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cliente está autenticado pero no tiene permisos para acceder al recurso solicitado (autorización fallida).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario sin rol/permiso suficiente, acceso a recursos de otro usuario</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso solicitado no existe en el servidor.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID de usuario inexistente, endpoint no definido, recurso eliminado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">405</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method Not Allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El método HTTP utilizado no es permitido para este recurso. La respuesta debe incluir encabezado <code>Allow</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intentar DELETE en un endpoint que solo permite GET, POST en recurso protegido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">406</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Acceptable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor no puede producir una respuesta que coincida con los valores aceptados del cliente (encabezado Accept).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solicitar formato XML cuando solo se disponibiliza JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">408</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request Timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cliente tardó demasiado tiempo en enviar la solicitud completa.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conexión lenta, cliente inactivo durante demasiado tiempo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud entra en conflicto con el estado actual del recurso.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intentar actualizar un recurso con versión antigua (optimistic locking), duplicar recurso único</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">410</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso solicitado existió pero ya no está disponible y no volverá a estarlo.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso permanentemente eliminado o deprecado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">411</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length Required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor rechaza la solicitud porque falta el encabezado <code>Content-Length</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente no proporciona tamaño del contenido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">412</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precondition Failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se falló una precondición en los encabezados de solicitud (If-Match, If-Unmodified-Since, etc.).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ETag no coincide, recurso modificado desde la última lectura</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">413</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payload Too Large</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cuerpo de la solicitud es más grande que lo que el servidor está dispuesto o puede procesar.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivo de carga demasiado grande, limite de payload excedido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">414</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI Too Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La URI solicitada es más larga que lo que el servidor está dispuesto a procesar.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL excesivamente larga con parámetros</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">415</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsupported Media Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El formato del cuerpo de la solicitud no es soportado (Content-Type inválido).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enviar XML cuando se espera JSON, tipo MIME no reconocido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">416</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Range Not Satisfiable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El rango especificado en el encabezado <code>Range</code> no puede satisfacerse.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solicitar bytes fuera del rango disponible del recurso</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">418</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I&#8217;m a Teapot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor rechaza preparar café porque es una tetera (broma HTTP, RFC 2324).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solo en propósitos humorísticos o especiales</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">420</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enhance Your Calm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cliente está siendo limitado por tasa (usado por Twitter API).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rate limiting, demasiadas solicitudes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">422</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unprocessable Entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud está bien formada pero contiene errores semánticos. Los datos son inválidos según las reglas de negocio.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email duplicado, contraseña muy corta, validaciones de negocio fallidas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">423</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locked</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso que la solicitud intenta acceder está bloqueado.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso en edición por otro usuario, bajo mantenimiento</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">424</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Failed Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La solicitud falló debido a que falló una solicitud previa.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operación dependiente de otra que fracasó</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">428</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precondition Required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor requiere que la solicitud sea condicional (encabezados If-Match, etc.).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prevenir sobrescrituras accidentales</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Too Many Requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cliente ha enviado demasiadas solicitudes en un período de tiempo dado.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rate limiting, cuota de API excedida</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">431</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request Header Fields Too Large</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los encabezados de la solicitud son demasiado grandes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cookies excesivamente grandes, headers personalizados enormes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">451</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unavailable For Legal Reasons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El recurso no está disponible por razones legales (censurado, bloqueado geográficamente).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geo-restricción, bloqueo legal, cumplimiento normativo</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_5_4_respuestas_5xx_error_del_servidor">5.4 Respuestas 5xx (Error del Servidor)</h3>
<div class="paragraph">
<p>Los códigos 5xx indican que el servidor encontró un error inesperado y no puede completar la solicitud. La responsabilidad es del servidor.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Uso típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal Server Error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor encontró una condición inesperada que le impide cumplir la solicitud. Error genérico del servidor.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Excepción no capturada, error en lógica de negocio, fallo en base de datos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">501</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Implemented</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor no soporta la funcionalidad requerida para cumplir la solicitud (método HTTP no implementado).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Método HTTP válido pero no soportado en este servidor, característica no desarrollada</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">502</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bad Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor actuó como gateway o proxy y recibió una respuesta inválida del servidor aguas arriba.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error de comunicación entre servidores, proxy misconfigured, servidor backend caído</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">503</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Unavailable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor no está disponible temporalmente, usualmente debido a mantenimiento o sobrecarga.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servidor en mantenimiento, recursos agotados, demasiadas conexiones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">504</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway Timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor actuó como gateway o proxy y no recibió una respuesta a tiempo del servidor aguas arriba.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout en llamada a servicio backend, servidor upstream no responde</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">505</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP Version Not Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor no soporta la versión del protocolo HTTP utilizada en la solicitud.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente usando versión HTTP obsoleta o no soportada</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">506</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variant Also Negotiates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor tiene una configuración interna defectuosa en la negociación de contenido.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Problemas de configuración del servidor en Content-Negotiation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">507</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insufficient Storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor no tiene suficiente espacio de almacenamiento para completar la solicitud (WebDAV).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disco lleno, cuota de almacenamiento excedida</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">508</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop Detected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El servidor detectó un bucle infinito al procesar la solicitud (WebDAV).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuración de proxy circular, redirecciones recursivas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">510</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Extended</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se requieren extensiones de protocolo para cumplir la solicitud.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extensiones de protocolo requeridas no implementadas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">511</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Authentication Required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El cliente necesita autenticarse en la red para obtener acceso al recurso.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portal cautivo, autenticación de red requerida</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_6_formatos_de_representación">6. Formatos de Representación</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_6_1_formatos_de_representación">6.1 Formatos de Representación</h3>
<div class="paragraph">
<p>Los formatos de representación definen cómo se codifican y transmiten los datos en las solicitudes y respuestas HTTP. Se especifican mediante el encabezado <code>Content-Type</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Media Type</th>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Casos de uso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notación de Objetos JavaScript. Formato ligero, legible y ampliamente soportado. Estándar de facto en APIs REST modernas.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs REST, configuración, intercambio de datos entre servicios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lenguaje de Marcas Extensible. Más verboso que JSON pero muy estructurado y usado en sistemas empresariales legacy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs SOAP, EDI, sistemas heredados, configuración compleja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML (texto)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variante de XML especificada como texto plano. Similar a application/xml pero indicando que es texto.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Respuestas XML legibles, configuración, documentos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valores Separados por Comas. Formato simple para datos tabulares. Fácil de parsear y soportado por hojas de cálculo.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exportación de datos, reportes, importación en Excel/Sheets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/yaml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YAML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YAML Ain&#8217;t Markup Language. Formato legible, con indentación significativa. Popular en DevOps.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuración (Kubernetes, Docker Compose), datos de configuración</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/x-www-form-urlencoded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form URL Encoded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formato tradicional para envío de formularios HTML. Los datos se codifican como pares clave-valor.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formularios HTML, datos simple de aplicaciones web legadas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multipart/form-data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multipart Form Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formato para enviar datos complejos incluyendo archivos binarios. Usado por formularios con carga de archivos.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carga de archivos, formularios con datos mixtos (texto + binario)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/octet-stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binario Genérico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stream de bytes sin tipo específico. Indica contenido binario genérico.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descargas de archivos, contenido binario sin tipo específico</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_6_2_negociación_de_contenido_y_media_types_personalizados">6.2 Negociación de Contenido y Media Types Personalizados</h3>
<div class="paragraph">
<p>La negociación de contenido permite que cliente y servidor acuerden el formato más apropiado para la comunicación. Esto proporciona flexibilidad y compatibilidad en APIs.</p>
</div>
<div class="sect3">
<h4 id="_6_2_1_content_negotiation_negociación_de_contenido">6.2.1 Content Negotiation (Negociación de Contenido)</h4>
<div class="paragraph">
<p><strong>Encabezado Accept (Cliente → Servidor):</strong></p>
</div>
<div class="paragraph">
<p>El cliente especifica qué formatos puede aceptar usando el encabezado <code>Accept</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123 HTTP/1.1
Accept: application/json, application/xml;q=0.9, text/plain;q=0.8

# El servidor debe devolver uno de estos formatos
# q (quality factor): 0-1, indica preferencia (1 = máxima preferencia)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Encabezado Content-Type (Servidor → Cliente):</strong></p>
</div>
<div class="paragraph">
<p>El servidor especifica el formato exacto en la respuesta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "id": 123,
  "nombre": "Juan Pérez"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Otros encabezados de negociación:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Accept-Language</code>: Idioma preferido (es, en, fr)</p>
</li>
<li>
<p><code>Accept-Encoding</code>: Compresión soportada (gzip, deflate, brotli)</p>
</li>
<li>
<p><code>Accept-Charset</code>: Conjunto de caracteres (utf-8, iso-8859-1)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo completo:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123 HTTP/1.1
Accept: application/json
Accept-Language: es-ES,es;q=0.9
Accept-Encoding: gzip, deflate
Accept-Charset: utf-8

HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
Content-Encoding: gzip
Content-Language: es

{...}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_2_2_media_types_personalizados_vendor_specific">6.2.2 Media Types Personalizados (Vendor-Specific)</h4>
<div class="paragraph">
<p>Las APIs pueden definir tipos MIME personalizados para casos de uso específicos. Siguen el formato:</p>
</div>
<div class="paragraph">
<p><code>application/vnd.{empresa|organizacion}.{version}+{formato}</code></p>
</div>
<div class="paragraph">
<p><strong>Ejemplos:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application/vnd.github.v3+json</code> - GitHub API v3 en JSON</p>
</li>
<li>
<p><code>application/vnd.myapp.v1+json</code> - Mi aplicación, versión 1, en JSON</p>
</li>
<li>
<p><code>application/vnd.myapi.v2.hal+json</code> - Mi API v2 con HAL en JSON</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Versionado de API en el Content-Type</p>
</li>
<li>
<p>Evolución de API sin romper compatibilidad</p>
</li>
<li>
<p>Identificación clara del tipo específico de datos</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo de uso:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
Accept: application/vnd.myapi.v2+json

HTTP/1.1 200 OK
Content-Type: application/vnd.myapi.v2+json

{
  "usuarios": [
    {"id": 1, "nombre": "Juan"}
  ],
  "_links": {
    "self": {"href": "/api/usuarios"}
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_2_3_estrategias_de_negociación">6.2.3 Estrategias de Negociación</h4>
<div class="paragraph">
<p><strong>Por encabezado (Recomendado):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
Accept: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por parámetro de query:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios?format=json
GET /api/usuarios?format=xml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por extensión en URL:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios.json
GET /api/usuarios.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por encabezado personalizado:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
X-API-Format: json</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Jerarquía de preferencia (típica):</strong>
. Encabezado <code>Accept</code> (estándar HTTP)
. Parámetro <code>format</code> en query string
. Extensión en URL
. Encabezados personalizados
. Formato por defecto (usualmente JSON)</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_2_4_tabla_de_media_types_comunes">6.2.4 Tabla de Media Types Comunes</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Media Type</th>
<th class="tableblock halign-left valign-top">Usos en APIs</th>
<th class="tableblock halign-left valign-top">Características</th>
<th class="tableblock halign-left valign-top">Versionado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs REST modernas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ligero, rápido, fácil de parsear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.api.v1+json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sistemas empresariales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verboso, estructura compleja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.api.v1+xml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/hal+json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs REST con hipermedia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HAL (Hypertext Application Language)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.api.hal+json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.collection+json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs con collections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collection+JSON estándar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incluido en media type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/problem+json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Respuestas de error (RFC 7807)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Errores estructurados</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.api.problem+json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/ld+json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datos enlazados, Web semántica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON-LD con contexto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/vnd.api.ld+json</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_7_recomendaciones_clave_para_apis_rest">7. Recomendaciones Clave para APIs REST</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_7_1_seguridad">7.1 Seguridad</h3>
<div class="paragraph">
<p>La seguridad es un aspecto crítico en el desarrollo de APIs REST. Implica múltiples capas de protección para garantizar confidencialidad, integridad y disponibilidad.</p>
</div>
<div class="sect3">
<h4 id="_7_1_1_autenticación">7.1.1 Autenticación</h4>
<div class="paragraph">
<p>La autenticación verifica la identidad del cliente. Existen varios métodos:</p>
</div>
<div class="paragraph">
<p><strong>OAuth 2.0</strong></p>
</div>
<div class="paragraph">
<p>Protocolo estándar para delegación de acceso. Ideal para aplicaciones de terceros:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /oauth/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&amp;code=AUTH_CODE&amp;client_id=CLIENT_ID&amp;client_secret=CLIENT_SECRET

HTTP/1.1 200 OK
{
  "access_token": "ya29.a0AfH6SMBx...",
  "expires_in": 3599,
  "token_type": "Bearer"
}

# Uso del token en solicitudes
GET /api/usuarios HTTP/1.1
Authorization: Bearer ya29.a0AfH6SMBx...</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>JWT (JSON Web Tokens)</strong></p>
</div>
<div class="paragraph">
<p>Tokens auto-contenidos y digitalmente firmados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /api/login HTTP/1.1
Content-Type: application/json

{
  "usuario": "juan@example.com",
  "contraseña": "secreta123"
}

HTTP/1.1 200 OK
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaCBEb2UiLCJpYXQiOjE1MTYyMzkwMjJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
}

# Estructura JWT: header.payload.signature
# header: {"alg": "HS256", "typ": "JWT"}
# payload: {"sub": "1234567890", "name": "John Doe"}
# signature: HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secret)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Basic Auth</strong></p>
</div>
<div class="paragraph">
<p>Usuario y contraseña en Base64 (solo con HTTPS):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
Authorization: Basic am9hbjpzZWNyZXQxMjM=
# Base64 de: juan:secreto123</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>API Keys</strong></p>
</div>
<div class="paragraph">
<p>Tokens simples para aplicaciones máquina-a-máquina:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
X-API-Key: sk_live_xyz123abc456def789
# O en encabezado personalizado
Authorization: ApiKey sk_live_xyz123abc456def789</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Comparativa de métodos:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Método</th>
<th class="tableblock halign-left valign-top">Seguridad</th>
<th class="tableblock halign-left valign-top">Escalabilidad</th>
<th class="tableblock halign-left valign-top">Uso recomendado</th>
<th class="tableblock halign-left valign-top">Complejidad</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic Auth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja (sin HTTPS es inseguro)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo, sistemas internos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aplicaciones máquina-a-máquina</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JWT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta (si se usa HTTPS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta (stateless)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs públicas, microservicios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aplicaciones de terceros, delegación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_7_1_2_autorización">7.1.2 Autorización</h4>
<div class="paragraph">
<p>La autorización verifica qué permisos tiene el usuario autenticado:</p>
</div>
<div class="paragraph">
<p><strong>Control de Acceso Basado en Roles (RBAC):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "usuario_id": 123,
  "nombre": "Juan Pérez",
  "roles": ["usuario", "moderador"],
  "permisos": ["leer:posts", "crear:posts", "eliminar:posts"]
}

// En el servidor:
// GET /api/posts → Requiere "leer:posts"
// POST /api/posts → Requiere "crear:posts"
// DELETE /api/posts/456 → Requiere "eliminar:posts" + propietario del post</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Validación de autorización:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/456/perfil HTTP/1.1
Authorization: Bearer TOKEN_JUAN

# Servidor valida:
# 1. Token válido y no expirado
# 2. Usuario autenticado (Juan)
# 3. ¿Juan puede acceder al perfil del usuario 456?
#    - Si 456 es él mismo: SÍ
#    - Si 456 es otro usuario y privado: NO (403 Forbidden)
#    - Si Juan es admin: SÍ

HTTP/1.1 200 OK (o 403 Forbidden)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_1_3_https_obligatorio">7.1.3 HTTPS Obligatorio</h4>
<div class="paragraph">
<p><strong>Protocolo de Transporte Seguro:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>TLS 1.2 como mínimo (preferiblemente TLS 1.3)</p>
</li>
<li>
<p>Certificados SSL/TLS válidos de autoridades confiables</p>
</li>
<li>
<p>No permitir conexiones HTTP sin encriptar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Configuración recomendada:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Redirigir HTTP a HTTPS
HTTP/1.1 301 Moved Permanently
Location: https://api.example.com/ruta

# Encabezados de seguridad en respuesta HTTPS
Strict-Transport-Security: max-age=31536000; includeSubDomains
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Content-Security-Policy: default-src 'self'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_1_4_validación_de_entrada">7.1.4 Validación de Entrada</h4>
<div class="paragraph">
<p>Proteger contra inyección SQL, XSS, CSRF y otros ataques:</p>
</div>
<div class="paragraph">
<p><strong>Validación básica:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /api/usuarios HTTP/1.1
Content-Type: application/json

{
  "nombre": "Juan Pérez",           // Validar longitud, caracteres
  "email": "juan@example.com",      // Validar formato email
  "edad": 30,                       // Validar número en rango
  "descripcion": "Texto libre"      // Sanitizar HTML/scripts
}

# Servidor valida:
# - Nombre: 2-100 caracteres, sin caracteres especiales
# - Email: Formato válido, dominio existe
# - Edad: 18-120, número entero
# - Descripción: Sin scripts, máximo 1000 caracteres

# Si fallan validaciones → 422 Unprocessable Entity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Sanitización:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "errores": [
    {
      "campo": "nombre",
      "mensaje": "El nombre debe tener entre 2 y 100 caracteres"
    },
    {
      "campo": "email",
      "mensaje": "El formato de email no es válido"
    },
    {
      "campo": "descripcion",
      "mensaje": "La descripción contiene caracteres no permitidos"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Mejores prácticas:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lista blanca de caracteres permitidos</p>
</li>
<li>
<p>Escapar salida HTML</p>
</li>
<li>
<p>Usar consultas parametrizadas para bases de datos</p>
</li>
<li>
<p>Validar en servidor (no confiar en validación del cliente)</p>
</li>
<li>
<p>Limitar tamaños de payload</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_7_1_5_rate_limiting">7.1.5 Rate Limiting</h4>
<div class="paragraph">
<p>Prevenir abuso y ataques de denegación de servicio (DoS):</p>
</div>
<div class="paragraph">
<p><strong>Implementación con encabezados:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1

HTTP/1.1 200 OK
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1635724800

# El cliente sabe que:
# - Límite: 1000 solicitudes
# - Restantes en esta ventana: 999
# - Se reinicia en: timestamp 1635724800</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Cuando se excede el límite:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1

HTTP/1.1 429 Too Many Requests
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1635724800
Retry-After: 3600

{
  "error": "rate_limit_exceeded",
  "mensaje": "Ha excedido el límite de solicitudes. Reintente en 3600 segundos."
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estrategias de rate limiting:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Por IP: Limitar solicitudes por dirección IP</p>
</li>
<li>
<p>Por usuario: Limitar por usuario autenticado</p>
</li>
<li>
<p>Por API Key: Límites diferentes según tipo de cliente</p>
</li>
<li>
<p>Por endpoint: Límites específicos para operaciones costosas</p>
</li>
<li>
<p>Ventana deslizante: Contador que se reinicia periódicamente</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo de configuración:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cliente</th>
<th class="tableblock halign-left valign-top">Límite</th>
<th class="tableblock halign-left valign-top">Ventana</th>
<th class="tableblock halign-left valign-top">Caso de uso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anónimo (IP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 solicitudes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 hora</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuarios no autenticados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario básico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000 solicitudes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 día</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuarios registrados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario premium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000 solicitudes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 día</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suscriptores pagados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin/Bot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ilimitado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sistemas internos</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_7_2_documentación">7.2 Documentación</h3>
<div class="paragraph">
<p>Una documentación clara y completa es esencial para que los desarrolladores utilicen correctamente la API. Incluye especificaciones formales, ejemplos y guías prácticas.</p>
</div>
<div class="sect3">
<h4 id="_7_2_1_openapiswagger">7.2.1 OpenAPI/Swagger</h4>
<div class="paragraph">
<p><strong>OpenAPI</strong> es el estándar industrial para documentar APIs REST de forma máquina-legible.</p>
</div>
<div class="paragraph">
<p><strong>Especificación en formato YAML:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">openapi: 3.0.0
info:
  title: API de Usuarios
  version: 1.0.0
  description: API REST para gestión de usuarios
  contact:
    name: Soporte
    email: soporte@example.com
  license:
    name: MIT

servers:
  - url: https://api.example.com/v1
    description: Servidor de producción
  - url: https://staging-api.example.com/v1
    description: Servidor de pruebas

paths:
  /usuarios:
    get:
      summary: Obtener lista de usuarios
      description: Devuelve una lista paginada de usuarios
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Lista de usuarios
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Usuario'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          description: No autenticado
        '429':
          description: Demasiadas solicitudes

    post:
      summary: Crear nuevo usuario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioCrear'
      responses:
        '201':
          description: Usuario creado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Usuario'
        '400':
          description: Datos inválidos
        '422':
          description: Error de validación

  /usuarios/{id}:
    get:
      summary: Obtener usuario por ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Datos del usuario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Usuario'
        '404':
          description: Usuario no encontrado

components:
  schemas:
    Usuario:
      type: object
      properties:
        id:
          type: integer
        nombre:
          type: string
        email:
          type: string
          format: email
        activo:
          type: boolean
        fecha_creacion:
          type: string
          format: date-time
      required:
        - id
        - nombre
        - email

    UsuarioCrear:
      type: object
      properties:
        nombre:
          type: string
          minLength: 2
          maxLength: 100
        email:
          type: string
          format: email
        contraseña:
          type: string
          minLength: 8
      required:
        - nombre
        - email
        - contraseña

    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        pages:
          type: integer

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: []</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas de OpenAPI:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>✅ Especificación estándar e independiente de lenguaje</p>
</li>
<li>
<p>✅ Generación automática de clientes y servidores</p>
</li>
<li>
<p>✅ Validación automática de solicitudes/respuestas</p>
</li>
<li>
<p>✅ Herramientas como Swagger UI para visualizar interactivamente</p>
</li>
<li>
<p>✅ Análisis de cobertura de documentación</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Herramientas relacionadas:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Swagger UI</strong>: Interfaz web interactiva para explorar la API</p>
</li>
<li>
<p><strong>Swagger Editor</strong>: Editor para escribir especificaciones OpenAPI</p>
</li>
<li>
<p><strong>Postman</strong>: Puede importar especificaciones OpenAPI</p>
</li>
<li>
<p><strong>ReDoc</strong>: Documentación alternativa a Swagger UI</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_7_2_2_ejemplos_de_uso">7.2.2 Ejemplos de Uso</h4>
<div class="paragraph">
<p>Proporcionar ejemplos claros de cómo usar la API:</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo: Crear un usuario</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -X POST https://api.example.com/v1/usuarios \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "nombre": "Juan Pérez",
    "email": "juan@example.com",
    "contraseña": "SecurePass123"
  }'

# Respuesta exitosa (201 Created)
{
  "id": 456,
  "nombre": "Juan Pérez",
  "email": "juan@example.com",
  "activo": true,
  "fecha_creacion": "2025-10-31T10:30:00Z"
}

# Respuesta de error (422 Unprocessable Entity)
{
  "error": "validation_error",
  "detalles": [
    {
      "campo": "email",
      "mensaje": "El email ya está registrado"
    },
    {
      "campo": "contraseña",
      "mensaje": "La contraseña debe tener al menos 8 caracteres"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ejemplo en diferentes lenguajes:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import requests

url = "https://api.example.com/v1/usuarios"
headers = {
    "Authorization": "Bearer TOKEN",
    "Content-Type": "application/json"
}
data = {
    "nombre": "Juan Pérez",
    "email": "juan@example.com",
    "contraseña": "SecurePass123"
}

response = requests.post(url, headers=headers, json=data)
usuario = response.json()
print(f"Usuario creado: {usuario['id']}")</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const response = await fetch('https://api.example.com/v1/usuarios', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    nombre: 'Juan Pérez',
    email: 'juan@example.com',
    contraseña: 'SecurePass123'
  })
});

const usuario = await response.json();
console.log(`Usuario creado: ${usuario.id}`);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_2_3_guías_de_integración">7.2.3 Guías de Integración</h4>
<div class="paragraph">
<p>Documentación práctica paso a paso:</p>
</div>
<div class="paragraph">
<p><strong>Guía: Autenticación con JWT</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Obtener token:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Realizar POST a <code>/auth/login</code> con credenciales</p>
</li>
<li>
<p>Recibir token JWT en respuesta</p>
</li>
<li>
<p>Guardar token en cliente</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Usar token en solicitudes:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Incluir encabezado <code>Authorization: Bearer TOKEN</code></p>
</li>
<li>
<p>Token válido por 24 horas</p>
</li>
<li>
<p>Refresco de token con endpoint <code>/auth/refresh</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Manejo de tokens expirados:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Detectar respuesta 401 Unauthorized</p>
</li>
<li>
<p>Intentar refrescar token con <code>/auth/refresh</code></p>
</li>
<li>
<p>Si falla, redirigir a login</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Guía: Paginación de resultados</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Primera página:</strong></p>
<div class="ulist">
<ul>
<li>
<p>GET <code>/usuarios?page=1&amp;limit=10</code></p>
</li>
<li>
<p>Respuesta incluye <code>pagination</code> con <code>pages</code> total</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Navegar entre páginas:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Usar campo <code>next</code> en respuesta para ir a siguiente</p>
</li>
<li>
<p>Usar campo <code>prev</code> para ir a anterior</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Optimización:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Usar cursor-based pagination para grandes conjuntos</p>
</li>
<li>
<p>Filtrar antes de paginar cuando sea posible</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_7_2_4_changelog">7.2.4 Changelog</h4>
<div class="paragraph">
<p>Mantener registro de cambios en la API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown"># Changelog de API v1

## [1.5.0] - 2025-10-31

### Agregado
- Nuevo endpoint GET `/usuarios/{id}/posts` para obtener posts de usuario
- Nuevo filtro `estado` en GET `/usuarios`
- Soporte para filtrado por rango de fechas

### Mejorado
- Rendimiento de búsqueda en 40%
- Reducción de tamaño de payload en 20%

### Cambiado
- Encabezado de autenticación: `X-API-Key` → `Authorization: Bearer`

### Deprecado
- Endpoint `/usuarios/search` (usar GET `/usuarios?q=...` en su lugar)
- Campo `user_id` en favor de `userId` (camelCase)

### Corregido
- Bug en paginación cuando limit &gt; 100
- Validación incorrecta de email con dominios internacionales

### Seguridad
- Actualización de dependencias para CVE-2025-12345
- Implementación de rate limiting por IP

## [1.4.0] - 2025-09-15

### Agregado
- Novo webhook para eventos de usuario

...</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Información importante en Changelog:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Versión y fecha de lanzamiento</p>
</li>
<li>
<p>Cambios por categoría (Agregado, Mejorado, Cambiado, Deprecado, Corregido, Seguridad)</p>
</li>
<li>
<p>Guía de migración para cambios breaking</p>
</li>
<li>
<p>Enlaces a documentación detallada</p>
</li>
<li>
<p>Avisos de deprecación con tiempo de vida útil</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_7_2_5_herramientas_de_documentación">7.2.5 Herramientas de Documentación</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Herramienta</th>
<th class="tableblock halign-left valign-top">Tipo</th>
<th class="tableblock halign-left valign-top">Características</th>
<th class="tableblock halign-left valign-top">Mejor para</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swagger/OpenAPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Especificación estándar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Máquina-legible, generación de código, Swagger UI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs documentadas formalmente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entorno de pruebas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Colecciones, ejemplos, tests, documentación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pruebas manuales, ejemplos interactivos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReDoc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visualizador</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diseño moderno, documentación limpia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentación legible para usuarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadTheDocs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generador de docs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hospedaje gratuito, versionado, búsqueda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentación extensa en Markdown</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Blueprint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lenguaje de especificación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar a OpenAPI, más simple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs simples, prototipado rápido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Especificación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jerárquica, bien estructurada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Organizaciones grandes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_7_3_versionado">7.3 Versionado</h3>
<div class="paragraph">
<p>El versionado de API permite mantener múltiples versiones concurrentes mientras se evoluciona la API sin romper la compatibilidad con clientes existentes.</p>
</div>
<div class="sect3">
<h4 id="_7_3_1_estrategias_de_versionado">7.3.1 Estrategias de Versionado</h4>
<div class="paragraph">
<p><strong>1. Versionado en la URL (URI Versioning)</strong></p>
</div>
<div class="paragraph">
<p>La forma más común y explícita:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/v1/usuarios
GET https://api.example.com/v2/usuarios
GET https://api.example.com/v3/usuarios</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* Muy explícito y fácil de entender
* Fácil de usar en navegador y herramientas
* Cada versión es una URL diferente</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* URLs diferentes para la misma funcionalidad
* Requiere actualizar código cliente
* Puede parecer poco elegante</p>
</div>
<div class="paragraph">
<p><strong>2. Versionado en Encabezados (Header Versioning)</strong></p>
</div>
<div class="paragraph">
<p>Especificar versión en encabezados HTTP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/usuarios HTTP/1.1
Accept: application/vnd.myapi.v2+json
X-API-Version: 2

# O con content negotiation más específico
Accept: application/vnd.company.myapi+json; version=2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* URL única para todas las versiones
* Más elegante desde el punto de vista REST puro
* Facilita la negociación de contenido</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* No es visible en la URL
* Más difícil de debuggear
* Menos intuitivo para usuarios</p>
</div>
<div class="paragraph">
<p><strong>3. Versionado por Parámetro Query</strong></p>
</div>
<div class="paragraph">
<p>Especificar versión como parámetro:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/usuarios?api_version=2
GET https://api.example.com/usuarios?v=2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* Fácil de implementar
* Visible en la URL
* Flexible</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* No es estándar
* Puede causar confusión con otros parámetros
* Menos claro que estás haciendo versionado</p>
</div>
<div class="paragraph">
<p><strong>4. Versionado Semántico (Recomendado)</strong></p>
</div>
<div class="paragraph">
<p>Usar versionado semántico (MAJOR.MINOR.PATCH):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">v1.0.0 - Primera versión
v1.1.0 - Cambios hacia atrás compatibles (nuevos campos)
v1.1.1 - Bug fixes hacia atrás compatibles
v2.0.0 - Cambios breaking (no compatible con v1)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Tabla comparativa:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Estrategia</th>
<th class="tableblock halign-left valign-top">Visibilidad</th>
<th class="tableblock halign-left valign-top">Estándar</th>
<th class="tableblock halign-left valign-top">Escalabilidad</th>
<th class="tableblock halign-left valign-top">Recomendado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL Versioning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No estándar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅ Sí (más común)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header Versioning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RFC 7231</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">⭐ Ideal teóricamente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No estándar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ Evitar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semántico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estándar (SemVer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅ Para releases</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_7_3_2_deprecación_de_versiones">7.3.2 Deprecación de Versiones</h4>
<div class="paragraph">
<p>Proceso para retirarse gradualmente de versiones antiguas:</p>
</div>
<div class="paragraph">
<p><strong>Fases de Deprecación:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Anuncio (Fase 1):</strong></p>
<div class="ulist">
<ul>
<li>
<p>Publicar en changelog que versión será deprecada</p>
</li>
<li>
<p>Avisar con 6-12 meses de anticipación</p>
</li>
<li>
<p>Incluir razones y guía de migración</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Suporte Limitado (Fase 2):</strong></p>
<div class="ulist">
<ul>
<li>
<p>Mantener versión funcionando</p>
</li>
<li>
<p>No agregar nuevas características</p>
</li>
<li>
<p>Solo corregir bugs críticos</p>
</li>
<li>
<p>Advertencia en encabezados HTTP</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Read-Only (Fase 3):</strong></p>
<div class="ulist">
<ul>
<li>
<p>Permitir solo lectura (GET)</p>
</li>
<li>
<p>Bloquer escritura (POST, PUT, DELETE)</p>
</li>
<li>
<p>Devolver error 410 Gone o 400 Bad Request</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Shutdown (Fase 4):</strong></p>
<div class="ulist">
<ul>
<li>
<p>Versión completamente removida</p>
</li>
<li>
<p>Devolver error 404 o 410 Gone</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Ejemplo con encabezados de deprecación:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/v1/usuarios HTTP/1.1

HTTP/1.1 200 OK
Deprecation: true
Sunset: Wed, 31 Dec 2025 23:59:59 GMT
Link: &lt;/v2/usuarios&gt;; rel="successor-version"
Warning: 299 - "API v1 está deprecada. Migrar a v2 antes del 31/12/2025"

{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Encabezados de deprecación estándar (RFC 8594):</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Deprecation: true</code> - Indica que el endpoint está deprecado</p>
</li>
<li>
<p><code>Sunset: &lt;date&gt;</code> - Fecha en que desaparecerá</p>
</li>
<li>
<p><code>Link: &lt;url&gt;; rel="successor-version"</code> - Versión/endpoint alternativo</p>
</li>
<li>
<p><code>Warning: 299 - &lt;mensaje&gt;</code> - Mensaje de advertencia</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Timeline de ejemplo:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Hoy:              API v1 es la actual
+3 meses:         Anunciar deprecación de v1
+6 meses:         v1 en modo "Read-Only"
+12 meses:        v1 es completamente removida
                  Clientes deben estar en v2 o superior</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_3_3_migración_de_clientes">7.3.3 Migración de Clientes</h4>
<div class="paragraph">
<p>Guía para que los clientes migren de una versión a otra:</p>
</div>
<div class="paragraph">
<p><strong>Guía de Migración: v1 → v2</strong></p>
</div>
<div class="paragraph">
<p><strong>Cambios principales en v2:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">1. Estructura de respuesta:
   v1: {"users": [...]}
   v2: {"data": [...], "pagination": {...}}

2. Nombres de campos:
   v1: user_id, user_name
   v2: userId, userName (camelCase)

3. URLs de endpoints:
   v1: /users/{id}/posts
   v2: /users/{id}/timeline/posts

4. Autenticación:
   v1: X-API-Key: key
   v2: Authorization: Bearer token</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Pasos para migrar:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">## Paso 1: Instalar cliente compatible con v2

\`\`\`bash
npm install @company/api-client@^2.0.0
\`\`\`

## Paso 2: Actualizar endpoint base

\`\`\`javascript
// v1
const client = new APIClient({url: 'https://api.example.com/v1'});

// v2
const client = new APIClient({url: 'https://api.example.com/v2'});
\`\`\`

## Paso 3: Actualizar autenticación

\`\`\`javascript
// v1
client.setApiKey('sk_live_xyz');

// v2
client.setToken('eyJhbGc...');
\`\`\`

## Paso 4: Actualizar manejo de respuestas

\`\`\`javascript
// v1
const users = response.users;

// v2
const users = response.data;
const pagination = response.pagination;
\`\`\`

## Paso 5: Actualizar nombres de campos

\`\`\`javascript
// v1
user.user_id, user.user_name

// v2
user.userId, user.userName
\`\`\`

## Paso 6: Probar completamente

\`\`\`bash
npm test
\`\`\`

## Paso 7: Deployer en producción

\`\`\`bash
npm run build
npm run deploy
\`\`\`</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Soporte durante la migración:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentación clara y ejemplos</p>
</li>
<li>
<p>SDKs actualizados</p>
</li>
<li>
<p>Herramienta de validación automática</p>
</li>
<li>
<p>Período de soporte técnico extendido</p>
</li>
<li>
<p>Notificaciones de progreso</p>
</li>
<li>
<p>Dashboard de estado de migración</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Matriz de compatibilidad:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cliente</th>
<th class="tableblock halign-left valign-top">v1</th>
<th class="tableblock halign-left valign-top">v2</th>
<th class="tableblock halign-left valign-top">v3</th>
<th class="tableblock halign-left valign-top">Recomendado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅ Full</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">⚠️ Parcial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualizar a 2.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅ Full</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">⚠️ Parcial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actual (usar 2.5.x)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌ No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅ Full</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recomendado</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Modelo de ciclo de vida:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Versión  Estado          End of Life  Acciones para clientes
------   ------          -----------  ----------------------
v1       ❌ Obsoleta     2025-12-31   MIGRAR a v2 o superior
v2       ⚠️  Mantenida    2026-12-31   Mantener o actualizar a v3
v3       ✅ Actual       2027-12-31   Usar esta versión
v4       ℹ️  Beta         TBD          Probar, reportar issues</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_3_4_estrategia_recomendada">7.3.4 Estrategia Recomendada</h4>
<div class="paragraph">
<p><strong>Para APIs públicas:</strong>
1. Usar versionado URI (<code>/v1/</code>, <code>/v2/</code>)
2. Mantener 2-3 versiones concurrentes máximo
3. Deprecar versiones con 12 meses de anticipación
4. Proporcionar SDKs para facilitar migración
5. Comunicar cambios tempranamente en changelog</p>
</div>
<div class="paragraph">
<p><strong>Para APIs internas:</strong>
1. Considerar versionado por encabezado
2. Coordinar directamente con consumidores internos
3. Ciclos de deprecación más cortos (3-6 meses)
4. Migración obligatoria antes de shutdown</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_7_4_paginación_y_filtrado">7.4 Paginación y Filtrado</h3>
<div class="paragraph">
<p>Estrategias para manejar grandes conjuntos de datos de forma eficiente, permitiendo al cliente recuperar solo los datos que necesita.</p>
</div>
<div class="sect3">
<h4 id="_7_4_1_paginación">7.4.1 Paginación</h4>
<div class="paragraph">
<p>La paginación divide grandes conjuntos de datos en páginas más manejables.</p>
</div>
<div class="paragraph">
<p><strong>1. Offset-Based Pagination</strong></p>
</div>
<div class="paragraph">
<p>La forma más simple. Especifica cuántos registros saltar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/usuarios?limit=10&amp;offset=0   # Primeros 10
GET https://api.example.com/usuarios?limit=10&amp;offset=10  # Registros 11-20
GET https://api.example.com/usuarios?limit=10&amp;offset=20  # Registros 21-30</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 1, "nombre": "Juan"},
    {"id": 2, "nombre": "María"},
    ...
  ],
  "pagination": {
    "limit": 10,
    "offset": 0,
    "total": 245,
    "pages": 25
  },
  "links": {
    "self": "/usuarios?limit=10&amp;offset=0",
    "next": "/usuarios?limit=10&amp;offset=10",
    "last": "/usuarios?limit=10&amp;offset=240"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* Simple de entender e implementar
* Fácil cálculo de página
* Permite saltar a página específica</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* Ineficiente con datos que cambian constantemente
* Problemas si se eliminan registros durante paginación
* Lento con offsets muy grandes</p>
</div>
<div class="paragraph">
<p><strong>2. Page-Based Pagination</strong></p>
</div>
<div class="paragraph">
<p>Similar a offset pero usando número de página:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET https://api.example.com/usuarios?page=1&amp;limit=10
GET https://api.example.com/usuarios?page=2&amp;limit=10
GET https://api.example.com/usuarios?page=3&amp;limit=10</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [...],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 245,
    "pages": 25
  },
  "links": {
    "first": "/usuarios?page=1&amp;limit=10",
    "prev": null,
    "self": "/usuarios?page=1&amp;limit=10",
    "next": "/usuarios?page=2&amp;limit=10",
    "last": "/usuarios?page=25&amp;limit=10"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* Más intuitivo que offset
* Mejor experiencia en UI (botones "Anterior", "Siguiente")</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* Los mismos problemas que offset-based</p>
</div>
<div class="paragraph">
<p><strong>3. Cursor-Based Pagination (Recomendado)</strong></p>
</div>
<div class="paragraph">
<p>Usa un cursor para marcar posición en los datos. Más eficiente con grandes conjuntos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Primera solicitud
GET https://api.example.com/usuarios?limit=10

# Solicitudes subsecuentes
GET https://api.example.com/usuarios?limit=10&amp;after=Y3Vyc29yXzEwMA==
GET https://api.example.com/usuarios?limit=10&amp;after=Y3Vyc29yXzIwMA==</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 1, "nombre": "Juan"},
    {"id": 2, "nombre": "María"},
    ...
  ],
  "pageInfo": {
    "hasNextPage": true,
    "hasPreviousPage": false,
    "startCursor": "Y3Vyc29yXzA=",
    "endCursor": "Y3Vyc29yXzk="
  },
  "links": {
    "self": "/usuarios?limit=10",
    "next": "/usuarios?limit=10&amp;after=Y3Vyc29yXzk=",
    "prev": null
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ventajas:</strong>
* ✅ Eficiente incluso con millones de registros
* ✅ Maneja cambios en datos sin problemas
* ✅ Ideal para aplicaciones en tiempo real
* ✅ Usado por Facebook, GitHub, etc.</p>
</div>
<div class="paragraph">
<p><strong>Desventajas:</strong>
* Más complejo de implementar
* No permite saltar a página específica
* Cursores pueden ser opacos para usuario</p>
</div>
<div class="paragraph">
<p><strong>Tabla comparativa:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Estrategia</th>
<th class="tableblock halign-left valign-top">Complejidad</th>
<th class="tableblock halign-left valign-top">Escalabilidad</th>
<th class="tableblock halign-left valign-top">Bueno para</th>
<th class="tableblock halign-left valign-top">Evitar</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset-Based</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs simples, datos pequeños</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conjuntos &gt; 100K registros</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page-Based</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interfaces web tradicionales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datos que cambian constantemente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cursor-Based</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs públicas, feeds, datos grandes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs simples internas</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_7_4_2_filtrado_de_resultados">7.4.2 Filtrado de Resultados</h4>
<div class="paragraph">
<p>Permite al cliente especificar qué registros devolver basado en criterios:</p>
</div>
<div class="paragraph">
<p><strong>Filtros simples:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /usuarios?estado=activo
GET /usuarios?estado=activo&amp;ciudad=Madrid
GET /usuarios?estado=activo&amp;ciudad=Madrid&amp;edad=30</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Filtros avanzados:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Operadores de comparación
GET /usuarios?edad[gte]=18&amp;edad[lte]=65  # edad &gt;= 18 AND edad &lt;= 65
GET /usuarios?fecha_creacion[gte]=2025-01-01

# Búsqueda de texto
GET /usuarios?q=Juan                      # Búsqueda full-text
GET /usuarios?nombre[like]=%Juan%         # LIKE pattern

# Filtros múltiples (OR)
GET /usuarios?estado=activo,inactivo      # estado IN ('activo', 'inactivo')

# Negación
GET /usuarios?estado[ne]=eliminado        # estado != 'eliminado'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta con metadatos de filtro:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 1, "nombre": "Juan", "edad": 30, "estado": "activo"},
    {"id": 2, "nombre": "María", "edad": 25, "estado": "activo"}
  ],
  "filters": {
    "estado": "activo",
    "edad": {"gte": 18, "lte": 65}
  },
  "pagination": {...}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Operadores recomendados:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operador</th>
<th class="tableblock halign-left valign-top">Sintaxis</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
<th class="tableblock halign-left valign-top">Significado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Igual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status=active</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Igualdad exacta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No igual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[ne]=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status[ne]=deleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No igual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mayor que</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[gt]=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">age[gt]=18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mayor que</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mayor o igual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[gte]=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date[gte]=2025-01-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mayor o igual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Menor que</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[lt]=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">price[lt]=100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Menor que</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Menor o igual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[lte]=value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">price[lte]=100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Menor o igual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contiene</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[like]=pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name[like]=%Juan%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIKE SQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">En lista</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field=val1,val2,val3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">status=active,pending</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN SQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Existe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field[exists]=true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">email[exists]=true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Campo no nulo</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_7_4_3_ordenamiento">7.4.3 Ordenamiento</h4>
<div class="paragraph">
<p>Especificar el orden en que devolver los registros:</p>
</div>
<div class="paragraph">
<p><strong>Ordenamiento simple:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /usuarios?sort=nombre               # Ascendente por defecto
GET /usuarios?sort=-nombre              # Descendente (con -)
GET /usuarios?sort=+nombre              # Explícitamente ascendente

# Alias común
GET /usuarios?order_by=nombre&amp;direction=asc
GET /usuarios?order_by=nombre&amp;direction=desc</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ordenamiento múltiple:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /usuarios?sort=estado,-fecha_creacion  # Por estado ASC, luego por fecha DESC
GET /usuarios?sort=-edad,nombre            # Por edad DESC, luego por nombre ASC</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 5, "nombre": "Ana", "estado": "activo", "fecha": "2025-10-01"},
    {"id": 2, "nombre": "María", "estado": "activo", "fecha": "2025-10-15"},
    {"id": 1, "nombre": "Juan", "estado": "activo", "fecha": "2025-10-31"}
  ],
  "sort": {
    "fields": ["estado", "-fecha_creacion"],
    "orders": [
      {"field": "estado", "direction": "asc"},
      {"field": "fecha_creacion", "direction": "desc"}
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Campos permitidos para ordenar:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Especificar en documentación API cuáles campos se pueden usar</p>
</li>
<li>
<p>Previene queries complejas en campos indexados</p>
</li>
<li>
<p>Protege datos sensibles</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Permitido
GET /usuarios?sort=nombre,edad,fecha_creacion

# No permitido (error 400)
GET /usuarios?sort=contraseña_hash,token_secreto
# Error: Campos no permitidos para ordenar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_4_4_proyección_de_campos_sparse_fieldsets">7.4.4 Proyección de Campos (Sparse Fieldsets)</h4>
<div class="paragraph">
<p>Permite al cliente solicitar solo los campos que necesita:</p>
</div>
<div class="paragraph">
<p><strong>Sintaxis:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Especificar campos a incluir
GET /usuarios/123?fields=id,nombre,email

# O solicitar todas las categorías de campos
GET /usuarios/123?fields=id,nombre,email,perfil.ciudad,perfil.edad

# Usando parámetro de header (GraphQL style)
GET /usuarios?fields[usuario]=id,nombre&amp;fields[perfil]=ciudad,edad</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta optimizada:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"># Sin fields (todos los campos)
GET /usuarios/123
{
  "id": 1,
  "nombre": "Juan",
  "email": "juan@example.com",
  "edad": 30,
  "ciudad": "Madrid",
  "contraseña_hash": "...",
  "token": "...",
  "creado_en": "2025-01-01",
  "actualizado_en": "2025-10-31"
}

# Con fields
GET /usuarios/123?fields=id,nombre,email
{
  "id": 1,
  "nombre": "Juan",
  "email": "juan@example.com"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Beneficios:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🚀 Reduce ancho de banda</p>
</li>
<li>
<p>⚡ Mejora rendimiento</p>
</li>
<li>
<p>🔒 Control sobre datos sensibles</p>
</li>
<li>
<p>📱 Ideal para clientes móviles</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo combinado:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /usuarios?estado=activo&amp;sort=-fecha_creacion&amp;page=1&amp;limit=20&amp;fields=id,nombre,email</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": [
    {"id": 1, "nombre": "Juan", "email": "juan@example.com"},
    {"id": 2, "nombre": "María", "email": "maria@example.com"},
    ...
  ],
  "filters": {"estado": "activo"},
  "sort": {"fields": ["-fecha_creacion"]},
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 245
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_4_5_mejores_prácticas">7.4.5 Mejores Prácticas</h4>
<div class="paragraph">
<p><strong>Límites y Validación:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Límite máximo de registros por página
GET /usuarios?limit=50       # ✅ OK (default 10, max 100)
GET /usuarios?limit=5000     # ❌ Error: limit demasiado alto

# Respuesta de error
HTTP/1.1 400 Bad Request
{
  "error": "invalid_limit",
  "mensaje": "limit debe ser entre 1 y 100",
  "sugerencia": "usar limit=100"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Encabezados informativos:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /usuarios?page=1&amp;limit=10

HTTP/1.1 200 OK
X-Total-Count: 245
X-Page: 1
X-Page-Size: 10
X-Pages: 25</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Documentación clara:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">### Parámetros de Query

| Parámetro | Tipo | Default | Máximo | Ejemplo |
|-----------|------|---------|--------|---------|
| page      | int  | 1       | N/A    | ?page=2 |
| limit     | int  | 10      | 100    | ?limit=50 |
| sort      | str  | -id     | 5 campos | ?sort=-fecha,nombre |
| fields    | str  | todos   | N/A    | ?fields=id,nombre |
| q         | str  | null    | N/A    | ?q=Juan |
| estado    | enum | null    | N/A    | ?estado=activo |

### Ejemplos

```bash
# Primeros 20 usuarios activos
GET /usuarios?estado=activo&amp;limit=20

# Página 2, ordenado por nombre
GET /usuarios?page=2&amp;sort=nombre

# Solo id y email, búsqueda por texto
GET /usuarios?fields=id,email&amp;q=juan@example.com
```</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_7_5_manejo_de_errores">7.5 Manejo de Errores</h3>
<div class="paragraph">
<p>El manejo consistente de errores es crucial para que los clientes puedan entender qué salió mal y cómo solucionarlo. Un buen manejo de errores mejora la experiencia del desarrollador.</p>
</div>
<div class="sect3">
<h4 id="_7_5_1_estructura_consistente_de_errores">7.5.1 Estructura Consistente de Errores</h4>
<div class="paragraph">
<p><strong>Formato recomendado (RFC 7807 - Problem Details):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "type": "https://api.example.com/errors/validation-error",
  "title": "Validation Error",
  "status": 422,
  "detail": "One or more validation errors occurred",
  "instance": "/usuarios",
  "timestamp": "2025-10-31T10:30:00Z",
  "trace_id": "0HN1GCDVCCBTF:00000001",
  "errors": [
    {
      "field": "email",
      "message": "Email is already registered",
      "code": "EMAIL_DUPLICATE"
    },
    {
      "field": "password",
      "message": "Password must be at least 8 characters",
      "code": "PASSWORD_TOO_SHORT"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estructura alternativa más simple:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Request validation failed",
    "status": 422,
    "details": [
      {
        "field": "email",
        "message": "Email already exists"
      },
      {
        "field": "age",
        "message": "Must be between 18 and 120"
      }
    ],
    "timestamp": "2025-10-31T10:30:00Z",
    "request_id": "req_xyz123"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estructura mínima:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "error": "validation_error",
  "message": "Email is invalid",
  "status": 400
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Recomendación:</strong> Usar la estructura RFC 7807 para APIs públicas profesionales.</p>
</div>
</div>
<div class="sect3">
<h4 id="_7_5_2_códigos_de_error_personalizados">7.5.2 Códigos de Error Personalizados</h4>
<div class="paragraph">
<p>Códigos alfanuméricos que identifican específicamente el problema:</p>
</div>
<div class="paragraph">
<p><strong>Convenciones de nomenclatura:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mayúsculas con guiones: <code>INVALID_EMAIL</code>, <code>DUPLICATE_USERNAME</code></p>
</li>
<li>
<p>Prefijo del dominio: <code>USER_NOT_FOUND</code>, <code>PAYMENT_FAILED</code></p>
</li>
<li>
<p>Sufijo descriptivo: <code>_REQUIRED</code>, <code>_TOO_LONG</code>, <code>_INVALID</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Catálogo de errores comunes:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">HTTP</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INVALID_REQUEST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solicitud malformada o parámetros inválidos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON inválido, tipo de dato incorrecto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AUTHENTICATION_REQUIRED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Falta autenticación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token ausente o expirado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AUTHENTICATION_FAILED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credenciales incorrectas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario/contraseña inválida</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PERMISSION_DENIED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario no tiene permisos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usuario sin rol de admin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESOURCE_NOT_FOUND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso no existe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID de usuario inexistente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">METHOD_NOT_ALLOWED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">405</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verbo HTTP no permitido</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST en endpoint que solo acepta GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFLICT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conflicto en el estado del recurso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intentar actualizar recurso modificado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VALIDATION_ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">422</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Errores de validación de negocio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email duplicado, contraseña débil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DUPLICATE_ENTRY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">422</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entrada duplicada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email/username ya registrado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RATE_LIMIT_EXCEEDED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Demasiadas solicitudes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Excedió cuota de API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTERNAL_ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error del servidor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Excepción no capturada</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SERVICE_UNAVAILABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">503</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servicio no disponible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servidor en mantenimiento</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Ejemplos de respuestas con códigos personalizados:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># 400 - Invalid Request
HTTP/1.1 400 Bad Request
{
  "error_code": "INVALID_JSON",
  "message": "Request body contains invalid JSON",
  "status": 400
}

# 401 - Authentication Required
HTTP/1.1 401 Unauthorized
{
  "error_code": "TOKEN_EXPIRED",
  "message": "JWT token has expired",
  "status": 401,
  "details": {
    "expired_at": "2025-10-31T08:00:00Z",
    "refresh_url": "/auth/refresh"
  }
}

# 422 - Validation Error
HTTP/1.1 422 Unprocessable Entity
{
  "error_code": "VALIDATION_ERROR",
  "message": "One or more validation errors occurred",
  "status": 422,
  "errors": [
    {"field": "email", "code": "EMAIL_INVALID"},
    {"field": "password", "code": "PASSWORD_TOO_SHORT"}
  ]
}

# 429 - Rate Limit
HTTP/1.1 429 Too Many Requests
{
  "error_code": "RATE_LIMIT_EXCEEDED",
  "message": "You have exceeded your rate limit",
  "status": 429,
  "details": {
    "limit": 1000,
    "reset_at": "2025-10-31T11:00:00Z",
    "retry_after": 1800
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_5_3_mensajes_claros_y_útiles">7.5.3 Mensajes Claros y Útiles</h4>
<div class="paragraph">
<p>Los mensajes de error deben ser informativos y orientados al usuario:</p>
</div>
<div class="paragraph">
<p><strong>Malos ejemplos:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">// ❌ Demasiado técnico
{"error": "NullPointerException at line 342"}

// ❌ Muy vago
{"error": "Something went wrong"}

// ❌ No accionable
{"error": "Invalid input"}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Buenos ejemplos:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">// ✅ Claro y específico
{
  "error_code": "EMAIL_INVALID",
  "message": "Email format is invalid. Use format: user@example.com",
  "status": 422
}

// ✅ Proporciona solución
{
  "error_code": "PASSWORD_TOO_SHORT",
  "message": "Password must be at least 8 characters. You provided 5 characters.",
  "status": 422,
  "suggestion": "Add more characters to your password"
}

// ✅ Enlaza a documentación
{
  "error_code": "AUTHENTICATION_FAILED",
  "message": "Invalid API key",
  "status": 401,
  "help_url": "https://docs.example.com/authentication"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Guía para mensajes:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Ser específico:</strong> Indicar exactamente qué falló</p>
</li>
<li>
<p><strong>Ser accionable:</strong> Sugerir cómo solucionarlo</p>
</li>
<li>
<p><strong>Ser respetuoso:</strong> No culpar al cliente</p>
</li>
<li>
<p><strong>Ser conciso:</strong> No más de 1-2 oraciones</p>
</li>
<li>
<p><strong>Ser accesible:</strong> Lenguaje simple, no jerga técnica</p>
</li>
<li>
<p><strong>En idioma del cliente:</strong> Respetar Accept-Language</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Ejemplos en contexto:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">// Validación de edad
{
  "field": "age",
  "message": "Age must be between 18 and 120. You provided -5."
}

// Recursos duplicados
{
  "field": "email",
  "message": "Email 'juan@example.com' is already registered. Did you mean to log in?"
}

// Límite de tasa
{
  "error": "rate_limit_exceeded",
  "message": "You've made 1000 requests this hour. Your limit will reset at 14:30.",
  "remaining": 0,
  "reset_at": "2025-10-31T14:30:00Z"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_5_4_detalles_de_contexto">7.5.4 Detalles de Contexto</h4>
<div class="paragraph">
<p>Información adicional que ayuda a debuggear y resolver problemas:</p>
</div>
<div class="paragraph">
<p><strong>Campos de contexto recomendados:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "status": 422,

    // Contexto temporal
    "timestamp": "2025-10-31T10:30:45.123Z",

    // Rastreo de solicitud
    "request_id": "req_abc123def456",
    "trace_id": "4bf92f3577b34da6a3ce929d0e0e4736",

    // Detalles de la solicitud
    "path": "/api/usuarios",
    "method": "POST",

    // Información del usuario (opcional)
    "user_id": "usr_789",
    "account_id": "acc_456",

    // Detalles específicos del error
    "errors": [
      {
        "field": "email",
        "code": "EMAIL_INVALID",
        "message": "Invalid email format",
        "value": "not-an-email"  // El valor que causó error
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ejemplo completo con contexto:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /api/usuarios HTTP/1.1
Authorization: Bearer token123
Content-Type: application/json

{
  "nombre": "Juan",
  "email": "invalid-email"
}

HTTP/1.1 422 Unprocessable Entity
X-Request-ID: req_abc123def456
Content-Type: application/json

{
  "type": "https://api.example.com/errors/validation-error",
  "title": "Validation Error",
  "status": 422,
  "detail": "One or more validation errors",
  "instance": "/api/usuarios",
  "request_id": "req_abc123def456",
  "timestamp": "2025-10-31T10:30:45Z",
  "errors": [
    {
      "pointer": "/email",
      "code": "EMAIL_INVALID",
      "message": "Must be a valid email address",
      "received": "invalid-email"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Encabezados informativos:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">X-Request-ID: req_abc123def456          # ID único para rastrear
X-Correlation-ID: corr_xyz789           # Correlacionar servicios
X-RateLimit-Remaining: 45                # Cuotas restantes
Retry-After: 3600                       # Cuándo reintentar
Content-Type: application/problem+json   # Tipo estándar de error</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_5_5_manejo_de_errores_por_tipo">7.5.5 Manejo de Errores por Tipo</h4>
<div class="paragraph">
<p><strong>Errores de Validación (4xx):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">HTTP/1.1 422 Unprocessable Entity

{
  "error_code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "status": 422,
  "errors": [
    {
      "field": "email",
      "message": "Must be a valid email",
      "code": "EMAIL_INVALID",
      "value": "not-email"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Errores de Autorización (4xx):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">HTTP/1.1 403 Forbidden

{
  "error_code": "PERMISSION_DENIED",
  "message": "You don't have permission to access this resource",
  "status": 403,
  "required_permission": "write:users",
  "documentation_url": "https://docs.example.com/permissions"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Errores del Servidor (5xx):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">HTTP/1.1 500 Internal Server Error

{
  "error_code": "INTERNAL_ERROR",
  "message": "An unexpected error occurred",
  "status": 500,
  "request_id": "req_abc123",
  "support_url": "https://support.example.com",
  "support_email": "support@example.com"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_5_6_mejores_prácticas">7.5.6 Mejores Prácticas</h4>
<div class="paragraph">
<p><strong>Encabezados de error estándar:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">X-Request-ID: Identificador único por solicitud
X-Error-Code: Código de error programático
Content-Type: application/problem+json
Retry-After: Segundos a esperar antes de reintentar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Logging de errores:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registrar todos los errores del servidor (5xx)</p>
</li>
<li>
<p>Incluir contexto: usuario, solicitud, stack trace</p>
</li>
<li>
<p>Usar el request_id para correlacionar logs</p>
</li>
<li>
<p>Alertar sobre errores críticos</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Documentación de errores:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documenter todos los códigos de error posibles</p>
</li>
<li>
<p>Explicar qué significa cada error</p>
</li>
<li>
<p>Proporcionar ejemplos de cómo solucionarlo</p>
</li>
<li>
<p>Incluir códigos de error en especificación OpenAPI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Cliente-side:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implementar reintentos con backoff exponencial</p>
</li>
<li>
<p>Mostrar mensajes de error amigables</p>
</li>
<li>
<p>Loguear errores para debugging</p>
</li>
<li>
<p>No exponer mensajes técnicos al usuario final</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_7_6_performance">7.6 Performance</h3>
<div class="paragraph">
<p>Optimizar el rendimiento de una API es crucial para una buena experiencia de usuario y reducción de costos de infraestructura.</p>
</div>
<div class="sect3">
<h4 id="_7_6_1_caching_con_headers_http">7.6.1 Caching con Headers HTTP</h4>
<div class="paragraph">
<p><strong>Cache-Control Header (RFC 7234):</strong></p>
</div>
<div class="paragraph">
<p>Define cómo y durante cuánto tiempo cachear una respuesta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123 HTTP/1.1

HTTP/1.1 200 OK
Cache-Control: public, max-age=3600

# Cache por 1 hora en navegador y proxies públicos</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Directivas principales:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># public: Puede ser cacheado por cualquiera (navegadores, proxies)
Cache-Control: public, max-age=3600

# private: Solo navegador, no por proxies
Cache-Control: private, max-age=1800

# max-age: Segundos antes de que expire
Cache-Control: max-age=86400  # 24 horas

# no-cache: Validar con servidor antes de usar copia en caché
Cache-Control: no-cache

# no-store: No cachear (datos sensibles)
Cache-Control: no-store

# must-revalidate: Revalidar después de expirar
Cache-Control: max-age=3600, must-revalidate

# Combinadas
Cache-Control: public, max-age=3600, must-revalidate</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ejemplo completo con validación condicional:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Primera solicitud
GET /api/usuarios HTTP/1.1

HTTP/1.1 200 OK
Cache-Control: public, max-age=3600
ETag: "abc123def456"
Last-Modified: Wed, 31 Oct 2025 10:00:00 GMT

[datos...]

# Cliente cachea la respuesta

# Solicitud posterior (dentro de 1 hora)
# El cliente usa caché sin contactar servidor

# Solicitud posterior (después de 1 hora)
GET /api/usuarios HTTP/1.1
If-None-Match: "abc123def456"
# O
If-Modified-Since: Wed, 31 Oct 2025 10:00:00 GMT

HTTP/1.1 304 Not Modified
# No se envían datos, cliente usa caché existente</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estrategia de caching por tipo de endpoint:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tipo de Endpoint</th>
<th class="tableblock halign-left valign-top">Cache</th>
<th class="tableblock halign-left valign-top">Tiempo</th>
<th class="tableblock halign-left valign-top">Directivas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET usuarios (lista)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5-15 minutos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public, max-age=600</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET usuario/{id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 minutos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public, max-age=1800</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET datos estáticos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24 horas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public, max-age=86400</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST (crear)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no-cache, no-store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT (actualizar)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no-cache, no-store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no-cache, no-store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datos personalizados</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-5 minutos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">private, max-age=300</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datos sensibles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no-store</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>ETag para validación:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Respuesta con ETag
HTTP/1.1 200 OK
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"

# Cliente envía ETag si existe en caché
GET /api/usuarios HTTP/1.1
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"

# Si no ha cambiado
HTTP/1.1 304 Not Modified

# Si ha cambiado
HTTP/1.1 200 OK
ETag: "6d82cbb8c0a4a1c0a4a1c0a4a1c0a4a1"
[nuevos datos...]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_6_2_compresión_gzip">7.6.2 Compresión GZIP</h4>
<div class="paragraph">
<p>Reduce el tamaño de transferencia de datos:</p>
</div>
<div class="paragraph">
<p><strong>Solicitud con Accept-Encoding:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios HTTP/1.1
Accept-Encoding: gzip, deflate, br

# br = Brotli (mejor compresión pero menos soporte)
# gzip = Estándar
# deflate = Antiguo, evitar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Respuesta comprimida:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">HTTP/1.1 200 OK
Content-Encoding: gzip
Content-Length: 1234

[datos comprimidos en gzip...]</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Impacto:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSON: 60-80% de reducción</p>
</li>
<li>
<p>XML: 70-85% de reducción</p>
</li>
<li>
<p>HTML: 70-90% de reducción</p>
</li>
<li>
<p>Imágenes: Poco impacto (ya comprimidas)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Configuración recomendada:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nginx" data-lang="nginx"># Nginx
gzip on;
gzip_types application/json text/plain application/xml;
gzip_min_length 1000;  # Solo comprimir &gt; 1KB
gzip_level 6;          # Balance entre tiempo y tamaño</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ejemplo de reducción:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Sin compresión: 150 KB
Con gzip:       25 KB
Reducción:      83%
Tiempo extra:   ~5ms (en conexión rápida)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_6_3_cdn_content_delivery_network">7.6.3 CDN (Content Delivery Network)</h4>
<div class="paragraph">
<p>Distribuye contenido geográficamente para reducir latencia:</p>
</div>
<div class="paragraph">
<p><strong>Mejoras de CDN:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reduce latencia (distancia física → ~50ms → ~10ms)</p>
</li>
<li>
<p>Distribuye carga del servidor</p>
</li>
<li>
<p>Caché distribuido globalmente</p>
</li>
<li>
<p>Protección contra DDoS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo de implementación:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Sin CDN
Cliente en Tokio → Servidor en Madrid → 150ms

# Con CDN
Cliente en Tokio → Nodo CDN Tokio → 10ms
Nodo CDN Tokio ← Servidor Madrid (caché) → 150ms primera vez</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>CDN populares:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cloudflare (mejor para APIs)</p>
</li>
<li>
<p>AWS CloudFront</p>
</li>
<li>
<p>Azure CDN</p>
</li>
<li>
<p>Akamai</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Configuración de CDN:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Headers para CDN
Cache-Control: public, max-age=3600

# Añadir dominio CDN en DNS
api.example.com → CDN (CNAME)

# CDN automáticamente cachea y distribuye</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_6_4_lazy_loading">7.6.4 Lazy Loading</h4>
<div class="paragraph">
<p>Cargar datos bajo demanda en lugar de todo de una vez:</p>
</div>
<div class="paragraph">
<p><strong>Sin lazy loading:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123

HTTP/1.1 200 OK
{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com",
  "posts": [
    {"id": 1, "titulo": "Post 1", "contenido": "..."},
    {"id": 2, "titulo": "Post 2", "contenido": "..."},
    // ... 1000 posts más
  ],
  "comentarios": [...],
  "seguidores": [...]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Con lazy loading:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123

HTTP/1.1 200 OK
{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com",
  "_links": {
    "posts": "/api/usuarios/123/posts",
    "comentarios": "/api/usuarios/123/comentarios",
    "seguidores": "/api/usuarios/123/seguidores"
  }
}

# Cliente carga datos solo si es necesario
GET /api/usuarios/123/posts?limit=10</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Beneficios:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🚀 Respuesta más rápida</p>
</li>
<li>
<p>📉 Menos consumo de memoria</p>
</li>
<li>
<p>🔗 APIs más modulares</p>
</li>
<li>
<p>📱 Mejor para móviles</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Implementación con expansión (expand):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Sin expandir
GET /api/usuarios/123
{
  "id": 123,
  "nombre": "Juan",
  "_links": {"posts": "/api/usuarios/123/posts"}
}

# Con expansión (include)
GET /api/usuarios/123?include=posts,comentarios
{
  "id": 123,
  "nombre": "Juan",
  "posts": [...],
  "comentarios": [...]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_7_6_5_batch_operations">7.6.5 Batch Operations</h4>
<div class="paragraph">
<p>Permite múltiples operaciones en una sola solicitud:</p>
</div>
<div class="paragraph">
<p><strong>Sin batch:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># 5 solicitudes separadas
GET /api/usuarios/1
GET /api/usuarios/2
GET /api/usuarios/3
GET /api/usuarios/4
GET /api/usuarios/5

# Latencia total: 5 × 100ms = 500ms (aproximado)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Con batch:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /api/batch HTTP/1.1
Content-Type: application/json

{
  "requests": [
    {"method": "GET", "path": "/usuarios/1"},
    {"method": "GET", "path": "/usuarios/2"},
    {"method": "GET", "path": "/usuarios/3"},
    {"method": "GET", "path": "/usuarios/4"},
    {"method": "GET", "path": "/usuarios/5"}
  ]
}

HTTP/1.1 200 OK
{
  "responses": [
    {"status": 200, "body": {...}},
    {"status": 200, "body": {...}},
    {"status": 200, "body": {...}},
    {"status": 200, "body": {...}},
    {"status": 200, "body": {...}}
  ]
}

# Latencia total: 1 × 100ms = 100ms</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Batch para modificaciones:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">POST /api/batch HTTP/1.1

{
  "requests": [
    {
      "id": "req1",
      "method": "POST",
      "path": "/usuarios",
      "body": {"nombre": "Juan"}
    },
    {
      "id": "req2",
      "method": "POST",
      "path": "/usuarios",
      "body": {"nombre": "María"}
    }
  ]
}

HTTP/1.1 200 OK
{
  "responses": [
    {"id": "req1", "status": 201, "body": {"id": 1}},
    {"id": "req2", "status": 201, "body": {"id": 2}}
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Alternativa: Usar GraphQL para queries complejas</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_7_6_6_mejores_prácticas_de_performance">7.6.6 Mejores Prácticas de Performance</h4>
<div class="paragraph">
<p><strong>Monitoreo:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Medir latencia en percentiles (p50, p95, p99)</p>
</li>
<li>
<p>Monitorear tiempo de respuesta por endpoint</p>
</li>
<li>
<p>Alertas si latencia &gt; umbral</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Optimización de database:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Índices en campos de búsqueda/filtrado</p>
</li>
<li>
<p>Denormalización donde sea apropiado</p>
</li>
<li>
<p>Queries optimizadas (EXPLAIN PLAN)</p>
</li>
<li>
<p>Connection pooling</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Caching en capas:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">1. Browser cache (Cache-Control headers)
2. CDN cache (distribuido globalmente)
3. API server cache (Redis, Memcached)
4. Database query cache
5. Database result cache</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Tabla de mejoras de performance:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Técnica</th>
<th class="tableblock halign-left valign-top">Mejora</th>
<th class="tableblock halign-left valign-top">Dificultad</th>
<th class="tableblock halign-left valign-top">Costo</th>
<th class="tableblock halign-left valign-top">Impacto</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Caching HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50-80%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nulo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GZIP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">70-80%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nulo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50-70%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bajo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lazy loading</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30-50%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nulo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch ops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60-80%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bajo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Índices DB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50-100x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bajo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query optimization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10-100x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nulo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_7_6_7_ejemplo_api_optimizada">7.6.7 Ejemplo: API Optimizada</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios?limite=20&amp;campos=id,nombre,email HTTP/1.1
Accept-Encoding: gzip
Accept-Language: es

HTTP/1.1 200 OK
Content-Type: application/json
Content-Encoding: gzip
Cache-Control: public, max-age=600
ETag: "abc123"
X-RateLimit-Remaining: 999

[gzip comprimido: 5KB en lugar de 25KB]</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Beneficios:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>✅ Respuesta rápida (100ms)</p>
</li>
<li>
<p>✅ Bajo uso de ancho de banda (5KB)</p>
</li>
<li>
<p>✅ Cacheado por 10 minutos</p>
</li>
<li>
<p>✅ Comprimido automáticamente</p>
</li>
<li>
<p>✅ Solo campos necesarios</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_8_comparativas_herramientas_y_antipatrones">8. Comparativas, Herramientas y Antipatrones</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_8_1_graphql_vs_rest">8.1 GraphQL vs REST</h3>
<div class="paragraph">
<p><strong>GraphQL</strong> es una alternativa moderna a REST que permite clientes solicitar exactamente los datos que necesitan.</p>
</div>
<div class="sect3">
<h4 id="_8_1_1_comparación">8.1.1 Comparación</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Aspecto</th>
<th class="tableblock halign-left valign-top">REST</th>
<th class="tableblock halign-left valign-top">GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Query</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Múltiples endpoints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un solo endpoint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Datos</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servidor define estructura</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente define estructura</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Over-fetching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Común (datos innecesarios)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eliminado (solo lo pedido)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Under-fetching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requiere solicitudes adicionales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Todo en una solicitud</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Curva de aprendizaje</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja (HTTP estándar)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media-Alta (lenguaje específico)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Caching</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fácil (HTTP Cache-Control)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difícil (todas son POST)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Debugging</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fácil (URL visible)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media (sin URL específica)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Documentación</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual (OpenAPI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automática (Introspection)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Seguridad</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Granular por endpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requiere validación en resolver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Complejidad de servidor</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta (resolvers complejos)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rendimiento</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bueno (simple)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Puede ser malo (N+1 queries)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Ejemplo REST:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># 3 solicitudes para obtener usuario, posts y comentarios
GET /api/usuarios/123
GET /api/usuarios/123/posts
GET /api/usuarios/123/comentarios

# Respuestas incluyen TODOS los campos
{
  "id": 123,
  "nombre": "Juan",
  "email": "juan@example.com",
  "edad": 30,
  "ciudad": "Madrid",
  // ... campos innecesarios
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ejemplo GraphQL:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql"># 1 solicitud, solo campos solicitados
query {
  usuario(id: 123) {
    nombre
    email
    posts {
      titulo
      fecha
      comentarios {
        texto
        autor
      }
    }
  }
}

# Respuesta exacta
{
  "data": {
    "usuario": {
      "nombre": "Juan",
      "email": "juan@example.com",
      "posts": [
        {
          "titulo": "Post 1",
          "fecha": "2025-10-31",
          "comentarios": [...]
        }
      ]
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_8_1_2_casos_de_uso">8.1.2 Casos de Uso</h4>
<div class="paragraph">
<p><strong>Usar REST cuando:</strong>
* ✅ APIs simples y CRUD
* ✅ Caché es importante
* ✅ Endpoints bien definidos
* ✅ Equipo prefiere HTTP estándar
* ✅ Clientes diversos con necesidades claras</p>
</div>
<div class="paragraph">
<p><strong>Usar GraphQL cuando:</strong>
* ✅ Muchas consultas complejas
* ✅ Clientes con necesidades variadas
* ✅ Over-fetching es problema
* ✅ Documentación automática importante
* ✅ Equipo con experiencia GraphQL</p>
</div>
<div class="paragraph">
<p><strong>Ejemplos:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Caso</th>
<th class="tableblock halign-left valign-top">Mejor opción</th>
<th class="tableblock halign-left valign-top">Razón</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRUD básico (usuarios, posts)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simplez, caché fácil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datos complejos e interconectados</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GraphQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evita over-fetching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API pública masiva</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predictibilidad, estabilidad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dashboard personalizado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GraphQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cada usuario pide datos distintos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile app con límite de datos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GraphQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solo envía lo necesario</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microservicios internos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ambas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST para simplicidad, GraphQL para flexibilidad</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_8_1_3_híbridos_graphql_rest">8.1.3 Híbridos (GraphQL + REST)</h4>
<div class="paragraph">
<p>Combinar ambas tecnologías para obtener lo mejor de cada una:</p>
</div>
<div class="paragraph">
<p><strong>Estrategia 1: GraphQL como capa de abstracción</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Cliente (Mobile) ──→ GraphQL Gateway ──→ REST Services
Cliente (Web)   ──→ GraphQL Gateway ──→ REST Services

GraphQL Gateway convierte GraphQL queries en llamadas REST internas</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estrategia 2: REST + GraphQL en paralelo</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Endpoint REST tradicional
GET /api/usuarios/123
{"id": 123, "nombre": "Juan", ...}

# Endpoint GraphQL
POST /graphql
{"query": "{ usuario(id: 123) { nombre email } }"}
{"data": {"usuario": {"nombre": "Juan", "email": "juan@example.com"}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Estrategia 3: GraphQL sobre REST</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># API tiene tanto REST como GraphQL
GET /api/usuarios       # REST tradicional
POST /api/graphql       # GraphQL endpoint

# Clientes eligen qué usar según necesidad</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Recomendación:</strong> Para la mayoría de casos, <strong>REST es mejor</strong>. GraphQL es overkill para CRUD simple pero excelente para datos complejos.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_8_2_herramientas_para_desarrollo_y_testing">8.2 Herramientas para Desarrollo y Testing</h3>
<div class="paragraph">
<p>Herramientas esenciales para crear, testear y documentar APIs REST:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Herramienta</th>
<th class="tableblock halign-left valign-top">Tipo</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Mejores para</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Swagger/OpenAPI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Especificación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estándar para documentación de APIs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentación formal, generación de código</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Postman</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente HTTP/Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interfaz gráfica para solicitudes, colecciones, tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo, testing manual, documentación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cURL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Herramienta línea de comandos para HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scripts, automatización, debugging</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTTPie</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cURL mejorado con sintaxis más clara</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing desde terminal, scripts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insomnia</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alternativa moderna a Postman (más ligera)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo rápido, diseño limpio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SoapUI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Especializado en testing de servicios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing complejo, mocking, SoapUI pro</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fiddler</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy para inspeccionar tráfico HTTP/HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debugging, inspección de tráfico</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Thunder Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extension VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente HTTP integrado en editor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo en editor, rápido</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>REST Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extension VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente REST minimalista en VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo ágil, .rest files</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_8_2_1_swaggeropenapi">8.2.1 Swagger/OpenAPI</h4>
<div class="paragraph">
<p>Ya documentado en sección 7.2.1. Estándar de facto para especificación de APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_2_2_postman">8.2.2 Postman</h4>
<div class="paragraph">
<p><strong>Características principales:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Interfaz gráfica intuitiva</p>
</li>
<li>
<p>Colecciones de solicitudes</p>
</li>
<li>
<p>Ambiente para variablesy credenciales</p>
</li>
<li>
<p>Tests automatizados</p>
</li>
<li>
<p>Documentación interactiva</p>
</li>
<li>
<p>Colaboración en equipo</p>
</li>
<li>
<p>Mocking de APIs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ejemplo de colección:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "info": {
    "name": "Mi API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Usuarios",
      "item": [
        {
          "name": "Listar usuarios",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/usuarios?limit=10",
              "host": ["{{base_url}}"],
              "path": ["usuarios"]
            }
          }
        },
        {
          "name": "Crear usuario",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/usuarios",
            "body": {
              "mode": "raw",
              "raw": "{\"nombre\": \"Juan\", \"email\": \"juan@example.com\"}"
            }
          }
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_8_2_3_curl">8.2.3 cURL</h4>
<div class="paragraph">
<p>Herramienta CLI estándar para HTTP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># GET simple
curl https://api.example.com/usuarios

# Con headers
curl -H "Authorization: Bearer TOKEN" https://api.example.com/usuarios

# POST con datos
curl -X POST https://api.example.com/usuarios \
  -H "Content-Type: application/json" \
  -d '{"nombre": "Juan", "email": "juan@example.com"}'

# Mostrar headers de respuesta
curl -i https://api.example.com/usuarios

# Verbose (ver detalles)
curl -v https://api.example.com/usuarios

# Guardar en archivo
curl https://api.example.com/data &gt; archivo.json

# Autenticación básica
curl -u usuario:contraseña https://api.example.com/usuarios</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_8_2_4_httpie">8.2.4 HTTPie</h4>
<div class="paragraph">
<p>Alternativa más amigable a cURL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># GET
http GET https://api.example.com/usuarios

# POST con JSON automático
http POST https://api.example.com/usuarios \
  nombre="Juan" \
  email="juan@example.com"

# Con autenticación
http --auth usuario:contraseña GET https://api.example.com/usuarios

# Con headers
http GET https://api.example.com/usuarios \
  "Authorization: Bearer TOKEN"

# Mostrar todo (request + response)
http -v POST https://api.example.com/usuarios

# Formato más legible que cURL
http -p=HhBb GET https://api.example.com/usuarios
# H = request headers, B = request body
# h = response headers, b = response body</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_8_2_5_insomnia">8.2.5 Insomnia</h4>
<div class="paragraph">
<p>Cliente HTTP moderno, alternativa a Postman:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Interfaz más limpia</p>
</li>
<li>
<p>Más ligera</p>
</li>
<li>
<p>Soporta GraphQL nativo</p>
</li>
<li>
<p>Versionado de solicitudes</p>
</li>
<li>
<p>Plugins para extensibilidad</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_8_2_6_vs_code_extensions">8.2.6 VS Code Extensions</h4>
<div class="paragraph">
<p><strong>REST Client:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rest" data-lang="rest">### GET usuarios
GET https://api.example.com/usuarios

### GET usuario específico
GET https://api.example.com/usuarios/123

### POST crear usuario
POST https://api.example.com/usuarios
Content-Type: application/json

{
  "nombre": "Juan",
  "email": "juan@example.com"
}

### Variables
@base_url = https://api.example.com

GET @base_url/usuarios</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Thunder Client:</strong> Similar pero interfaz integrada.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_8_3_antipatrones_a_evitar">8.3 Antipatrones a Evitar</h3>
<div class="paragraph">
<p>Prácticas comunes que generan APIs de baja calidad:</p>
</div>
<div class="sect3">
<h4 id="_8_3_1_usar_verbos_en_uris">8.3.1 Usar verbos en URIs</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO - Verbos en URI:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/obtener/123
GET /api/usuarios/listar
POST /api/usuarios/crear
POST /api/usuarios/actualizar/123
POST /api/usuarios/eliminar/123</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO - Verbos HTTP:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123        # Obtener
GET /api/usuarios            # Listar
POST /api/usuarios           # Crear
PUT /api/usuarios/123        # Actualizar
DELETE /api/usuarios/123     # Eliminar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Mezcla verbos HTTP con verbos en URIs, violando principios REST.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_2_mezclar_métodos_http">8.3.2 Mezclar métodos HTTP</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># POST para todo
POST /api/usuarios?action=get&amp;id=123
POST /api/usuarios?action=create
POST /api/usuarios?action=delete&amp;id=456

# GET para modificaciones
GET /api/usuarios/delete/123
GET /api/usuarios/update/456?name=Juan</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios/123
POST /api/usuarios
PUT /api/usuarios/456
DELETE /api/usuarios/456</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Los verbos HTTP tienen semántica específica. GET no debe modificar, POST no debe ser idempotente.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_3_códigos_de_estado_incorrectos">8.3.3 Códigos de estado incorrectos</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Siempre 200, error en body
HTTP/1.1 200 OK
{
  "error": "User not found",
  "status": 404
}

# Usar 500 para errores de cliente
HTTP/1.1 500 Internal Server Error
{
  "error": "Invalid email format"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">HTTP/1.1 404 Not Found
{
  "error": "User not found",
  "status": 404
}

HTTP/1.1 400 Bad Request
{
  "error": "Invalid email format",
  "status": 400
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Los códigos HTTP comunican estado. Cliente no sabe si falló o tuvo éxito sin parsear JSON.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_4_falta_de_versionado">8.3.4 Falta de versionado</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO - Sin versionado:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/usuarios

# Al cambiar API, clientes antiguos se rompen
# Sin forma de mantener compatibilidad</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO - Con versionado:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">GET /api/v1/usuarios
GET /api/v2/usuarios

# Mantener v1 funcionando mientras clientes migran a v2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Cambios inevitables rompen clientes antiguos.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_5_sin_documentación">8.3.5 Sin documentación</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">No hay documentación
Desarrolladores tienen que leer código
Cambios no comunicados
Ejemplos desactualizados</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Especificación OpenAPI
Documentación interactiva (Swagger UI)
Ejemplos en múltiples lenguajes
Changelog actualizado
Guías de integración</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Sin documentación, API es inútil.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_6_cambios_sin_deprecación">8.3.6 Cambios sin deprecación</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># v1.0: GET /api/usuarios/{id}
# v1.1: Cambiar a GET /api/users/{id} SIN aviso
# Clientes se rompen inmediatamente</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># v1.0: GET /api/usuarios/{id}
# v1.1: Agregar GET /api/users/{id}, marcar usuarios como deprecated
# v1.2: Remover /api/usuarios/{id} después de 6 meses
Deprecation: true
Sunset: Wed, 31 Dec 2025 23:59:59 GMT
Link: &lt;/api/users/{id}&gt;; rel="successor-version"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Clientes no tienen tiempo de migrar. Rompe confianza.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_7_respuestas_inconsistentes">8.3.7 Respuestas inconsistentes</h4>
<div class="paragraph">
<p>❌ <strong>INCORRECTO - Inconsistente:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">// Endpoint 1
{
  "id": 123,
  "userName": "juan"
}

// Endpoint 2
{
  "user_id": 456,
  "user_name": "maria"
}

// Endpoint 3
{
  "ID": 789,
  "NAME": "pedro"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>✅ <strong>CORRECTO - Consistente:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">// Todos usan camelCase
{
  "id": 123,
  "userName": "juan"
}

{
  "id": 456,
  "userName": "maria"
}

{
  "id": 789,
  "userName": "pedro"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Por qué es malo:</strong> Clientes must parsear múltiples formatos. Confusión y bugs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_8_3_8_más_antipatrones">8.3.8 Más antipatrones</h4>
<div class="paragraph">
<p><strong>Otros errores comunes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>❌ Usar diferentes códigos 2xx para el mismo resultado</p>
</li>
<li>
<p>❌ Devolver datos sensibles en URLs</p>
</li>
<li>
<p>❌ No usar HTTPS</p>
</li>
<li>
<p>❌ Rate limiting sin comunicar límites</p>
</li>
<li>
<p>❌ Sin request/trace IDs para debugging</p>
</li>
<li>
<p>❌ Cambiar formato de respuesta sin versionado</p>
</li>
<li>
<p>❌ No validar entrada</p>
</li>
<li>
<p>❌ Cambios breaking sin período de transición</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Resumen de buenas prácticas:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">✅ DO                              ❌ DON'T

✅ Usar nombres de recursos       ❌ Verbos en URLs
✅ HTTP verbs correctos            ❌ Mezclar POST/GET
✅ Códigos de estado correctos     ❌ Siempre 200
✅ Versionado                      ❌ Sin versionado
✅ Documentación completa          ❌ Código es documentación
✅ Deprecación gradual             ❌ Cambios abruptos
✅ Respuestas consistentes         ❌ Formatos variables
✅ Validación de entrada           ❌ Confiar en cliente
✅ HTTPS siempre                   ❌ HTTP sin TLS
✅ Comunicar cambios               ❌ Cambios silenciosos</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-31 17:13:15 +0100
</div>
</div>
</body>
</html>